System.register("chunks:///_virtual/ActiveNode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,i,n,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,n=e.CCInteger,s=e._decorator,c=e.Component}],execute:function(){var d,p,u,a,l,y;o._RF.push({},"ad452SAXs1NyqEmA/UkuMbJ","ActiveNode",void 0);const{ccclass:h,property:x,menu:f}=s;e("default",(d=f("Custom/ActiveNode"),p=x([i]),u=x({type:n,range:[0,10]}),h(a=d((y=t((l=class extends c{constructor(...e){super(...e),r(this,"nodes",y,this),this._index=0}set index(e){this._index=e,this.nodes.forEach(((t,r)=>{t&&(t.active=r===e)}))}get index(){return this._index}getCurrNode(){return this.nodes[this.index]}}).prototype,"nodes",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(l.prototype,"index",[u],Object.getOwnPropertyDescriptor(l.prototype,"index"),l.prototype),a=l))||a)||a));o._RF.pop()}}}));

System.register("chunks:///_virtual/ActiveSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,p,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,o=e.SpriteFrame,p=e.CCInteger,s=e._decorator,c=e.Component}],execute:function(){var a,u,l,d,m,g,y;i._RF.push({},"36984cegKZNwpIY5z7RYOnl","ActiveSprite",void 0);const{ccclass:h,property:x,integer:f,requireComponent:v,menu:F}=s;e("default",(a=v(n),u=F("Custom/ActiveSprite"),l=x([o]),d=x({type:p,range:[0,10]}),h(m=a(m=u((y=t((g=class extends c{constructor(...e){super(...e),r(this,"spriteFrame",y,this),this._index=0}set index(e){this._index=e,this.node.getComponent(n).spriteFrame=this.spriteFrame[e]}get index(){return this._index}}).prototype,"spriteFrame",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(g.prototype,"index",[d],Object.getOwnPropertyDescriptor(g.prototype,"index"),g.prototype),m=g))||m)||m)||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/AssetBundle.ts",["cc","./Core.ts","./Config.ts"],(function(e){var l,t,r,n,s,o,a,i,u;return{setters:[function(e){l=e.assetManager,t=e.Prefab,r=e.isValid,n=e.resources,s=e.Texture2D,o=e.SpriteFrame,a=e.cclegacy},function(e){i=e.default},function(e){u=e.Config}],execute:function(){a._RF.push({},"1f8a60hfLVJWp2rSQKYAlmF","AssetBundle",void 0);const d=window.jsb;e("default",class{constructor(){this.cached_res=new Map}async loadBundle(e,t){return l.getBundle(e)?l.getBundle(e):new Promise(((r,n)=>{let s=e,o=e=>{l.loadBundle(e,(async(l,t)=>{if(l)return i.logger.forceLog(`load bundle ${e} err`),i.logger.forceLog(l),n(l);r(t)}))};if(d){if(t>0){let e=this.getResDirPath(t);s=`${d.fileUtils?d.fileUtils.getWritablePath():"/"}remote-asset/${e}`}else s=`${d.fileUtils?d.fileUtils.getWritablePath():"/"}remote-asset/hall/assets/${e}`;o(e)}else o(s)}))}getResDirPath(e){return u.hotupdateDirNameMap[e]}releaseBundle(e){l.getBundle(e).releaseAll()}preloadPrefab(e,l,r){return new Promise((async(n,s)=>{let o=Date.now();this.loadBundle(e,r).then((r=>{r.preloadDir("./",t,l,((l,t)=>{if(l)return i.logger.forceLog("bundle load err: "+e),i.logger.forceLog(l),void s(l);i.logger.log(`Preload ${e} In Time: ${Date.now()-o}ms`),n()}))})).catch((e=>{}))}))}async loadRes(e,t,s,o){return new Promise(((a,u)=>{const d=this.cached_res.get(e);if(d&&r(d,!0))return s&&s(null,d),void a(d);const c=(l,t)=>{l?(s&&s(l,t),u(l)):t.isValid?(this.cached_res.set(e,t),null==s||s(null,t),a(t)):(null==s||s(l,t),u(l))};if("resources"===o)n.load(e,t,c);else{if(!l.getBundle(o))return i.logger.warn("bundle unloaded:"+o),void a(null);l.getBundle(o).load(e,t,c)}}))}async loadRemoteRes(e,t){return new Promise((r=>{l.loadRemote(e,((e,l)=>{if(e)return i.logger.error(e.message||e),null==t||t(null),void r(null);let n=new s;n.image=l;let a=new o;a.texture=n,null==t||t(a),r(a)}))}))}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioPlayer.ts",["cc","./Core.ts"],(function(e){var t,s,u,i;return{setters:[function(e){t=e.AudioClip,s=e.AudioSource,u=e.cclegacy},function(e){i=e.default}],execute:function(){u._RF.push({},"bef25LM+KVD84A04qcG65fL","AudioPlayer",void 0);e("default",class{constructor(){this._musicSource=null,this._effectSources=new Map,this._masterVolume=1,this._musicVolume=1,this._effectVolume=1,this._vibrationVolume=1,this._tempEffectVolume=void 0}get masterVolume(){return this._masterVolume}get musicVolume(){return this._musicVolume}get effectVolume(){return this._effectVolume}get vibrationVolume(){return this._vibrationVolume}setMasterVolume(e){e<0?e=0:e>1&&(e=1),this._masterVolume=e,this.setMusicVolume(this._musicVolume),this.setEffectVolume(this._effectVolume)}setMusicVolume(e){e<0?e=0:e>1&&(e=1),this._musicVolume=e;let t=this._masterVolume*e;this._musicSource&&(this._musicSource.volume=t)}setEffectVolume(e){e<0?e=0:e>1&&(e=1),this._effectVolume=this._masterVolume*e}setVibrationVolume(e){e<0?e=0:e>1&&(e=1),this._vibrationVolume=e}playMusic(e,u){i.asset.loadRes(e,t,((e,t)=>{e?i.logger.warn(e):(this._musicSource||(this._musicSource=new s),this._musicSource.stop(),this._musicSource.clip=t,this._musicSource.loop=!0,this._musicSource.volume=this._masterVolume*this._musicVolume,this._musicSource.play())}),u)}stopMusic(){var e;null==(e=this._musicSource)||e.stop()}pauseMusic(){var e;null==(e=this._musicSource)||e.pause()}recoverMusic(){this._musicSource&&!this._musicSource.playing&&this._musicSource.play()}playEffect(e,u,o=!0,c=!1){var l;o&&null!=(l=this._effectSources.get(e))&&l.playing||i.asset.loadRes(e,t,((t,u)=>{if(t)return void i.logger.warn(t);let o=this._effectSources.get(e);if(o)return o.volume=this._masterVolume*this._effectVolume,void o.play();let l=new s;l.clip=u,l.loop=c,l.volume=this._masterVolume*this._effectVolume,l.play(),this._effectSources.set(e,l)}),u)}stopEffect(e){let t=this._effectSources.get(e);t&&t.playing&&(t.stop(),this._effectSources.delete(e))}mute(){this._tempEffectVolume=this._effectVolume,this.setMasterVolume(0),this._updateVolume()}cancelMute(){this._effectVolume=this._tempEffectVolume??this._effectVolume,this.setMasterVolume(1),this._updateVolume()}_updateVolume(){for(const e in this._effectSources)if(Object.prototype.hasOwnProperty.call(this._effectSources,e)){this._effectSources[e].volume=this._masterVolume*this._effectVolume}}}),u._RF.pop()}}}));

System.register("chunks:///_virtual/BaseClass.ts",["cc","./Define.ts","./Core.ts"],(function(t){var e,n,o,i,s,l,r,a,u;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.Button,i=t.Toggle,s=t.warn,l=t.EventHandler,r=t._decorator},function(t){a=t.Bundle_name},function(t){u=t.default}],execute:function(){var d;e._RF.push({},"5aa3b6veWdOf5wJhVrkRKH1","BaseClass",void 0);const{ccclass:_}=r;t("default",_(d=class t extends n{constructor(...t){super(...t),this.m_isInit=!1,this.m_nodePool=new Map,this._prefix="_",this._prefixBt="_bt",this._preEnd_open="$",this._preEnd_close="&",this.without_warn=!0,this._preSoundOpen="_onBtSoundOpen",this._preSoundClose="_onBtSoundClose",this._preDouble="_onBtDoubleClick"}__preload(){this.m_isInit||this.bind()}$(t,e){if(this.m_isInit||this.bind(),!this.m_nodePool)return;let n=this.m_nodePool.get(t);return n?e?n.getComponent(e):n:null}saveData(t,e=this){e.node.attr({customData:t})}getData(t=this){return t.node.customData}setCustomData(t,e){t.customData=e}getCustomData(t){return t.customData}getJs(e,n=1){let o=null;for(;n>0;)o=(o??e).parent,n--;return o?o.getComponent(t):null}bind(){let t=new Map;this._bindSound(this.node,this),this._bindClickEvent(this.node,this),this._bindNode(this.node,t),this.m_nodePool=t,this.m_isInit=!0}_bindSound(t,e){if(null==e)return;let n=t.getComponentsInChildren(o);for(let t of n){let n="",o=t.node.name.slice(-1);o===this._preEnd_open?n=this._preSoundOpen:o===this._preEnd_close&&(n=this._preSoundClose),n&&this.bindEvent(t,n,e)&&(t.node.name=t.node.name.slice(0,-1))}}_bindClickEvent(t,e){if(null==e)return;let n=t.getComponentsInChildren(o);for(let t of n){let n=t.node.name;if(n!==this.node.name&&n.slice(0,3)===this._prefixBt){n=n.slice(3);let o=n.split("#");n=o[0],n=n.slice(0,1).toUpperCase()+n.slice(1);let i="_onBt"+n;this.bindEvent(t,i,e,o[1]),this.bindEvent(t,this._preDouble,e)}}}_onBtDoubleClick(t){if(!t.target)return;let e=t.target.getComponent(o),n=t.target.getComponent(i);if(e&&!n){e.enabled=!1;let t=setTimeout((()=>{e.isValid&&(e.enabled=!0),clearTimeout(t),t=null}),200)}}_bindNode(t,e){t.children.forEach((t=>{let n=t.name;n[0]===this._prefix&&e.set(n,t),this._bindNode(t,e)}))}bindEvent(t,e,n,o){let i=this._getComponentName(n);if(this._eixstEvent(t,e,i))return!1;if(!n[e])return"BaseClass"===i||this.without_warn||s(`${i}脚本下无${e}函数,绑定点击事件失败!`),!1;let r=new l;return r.target=n.node,r.component=i,r.handler=e,null!=o&&(r.customEventData=o),t.clickEvents.push(r),!0}_eixstEvent(t,e,n){for(let o of t.clickEvents)if(("_onBtClose"!=e||"_onBtClose"!=o.handler)&&o.handler==e&&o.component==n)return!0;return!1}_getComponentName(t){try{return t.name.match(/<.*>$/)[0].slice(1,-1)}catch(t){return u.logger.log(t),""}}_onBtClose(){}onBtSoundOpen(){this._onBtSoundOpen()}_onBtSoundOpen(){u.audio.playEffect("audio/button_open",a.Common)}_onBtSoundClose(){u.audio.playEffect("audio/button_open",a.Common)}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/ChannelConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"791c6IOjAdC1r1HH5ZF4LtK","ChannelConfig",void 0);e("ChannelConfig",{description:"华为内网开发环境配置",env:"dev",debug:!0,platform:"android",channel:"xiaomi",serverUrl:"https://dev.api.xxx.com",public_http_address:"https://dev.api.xxx.com",hotupdateUrl:"https://dev.cdn.xxx.com/xiaomi"});t._RF.pop()}}}));

System.register("chunks:///_virtual/CircleScrollLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,n,s,l,r,a,c,h,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Node,s=t.EventHandler,l=t._decorator,r=t.Component,a=t.v3,c=t.UITransform,h=t.instantiate,p=t.tween}],execute:function(){var u,d,_,g,m,b,f,v,y,x,R;o._RF.push({},"986f3ixSO5N/qyoW6ZXYyav","CircleScrollLine",void 0);const{ccclass:C,property:I,menu:E}=l;t("default",(u=E("Custom/CircleScrollLine"),d=I({tooltip:"滚动节点",type:n}),_=I({tooltip:"滚动时间间隔"}),g=I({tooltip:"循环滚动"}),m=I({type:s}),C(b=u((v=i((f=class extends r{constructor(...t){super(...t),e(this,"scroll_node",v,this),e(this,"delay",y,this),e(this,"loop",x,this),e(this,"updateEvents",R,this),this._isRolling=void 0,this._data=[],this._currIndex=0,this._position={top:a(0,0,0),centre:a(0,0,0),bottom:a(0,0,0)}}onLoad(){this._position.top=a(0,this.scroll_node.getComponent(c).height),this._position.centre=a(0,0),this._position.bottom=a(0,-this.scroll_node.getComponent(c).height);let t=h(this.scroll_node);t.parent=this.scroll_node.parent,t.position=this._position.bottom}startRoll(t){t&&0!==t.length&&(this._data=t,this._isRolling||(this._isRolling=!0,this.schedule((()=>{let t=this.scroll_node.parent,i=t.children[0],e=t.children[1],o=this._data[this._currIndex];o&&s.emitEvents(this.updateEvents,e,o),this.move(i,this._position.top,(()=>{i.setPosition(this._position.bottom);let t=this.getNextData();t&&s.emitEvents(this.updateEvents,i,t)})),e.active=!0,this.move(e,this._position.centre,(()=>{e.setSiblingIndex(0)}))}),this.delay)))}stoptRoll(){this._isRolling=!1,this.unscheduleAllCallbacks()}move(t,i,e){p(t).to(1,{position:i}).call((()=>{null==e||e()})).start()}getNextData(){if(this._currIndex++,this._currIndex>=this._data.length){if(!this.loop)return this.stoptRoll(),null;this._currIndex=0}return this._data[this._currIndex]}}).prototype,"scroll_node",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(f.prototype,"delay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),x=i(f.prototype,"loop",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=i(f.prototype,"updateEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=f))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/CircleScrollList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(t){var i,e,s,n,l,o,h,r,a,c,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,l=t.EventHandler,o=t._decorator,h=t.Component,r=t.Layout,a=t.game,c=t.UITransform},function(t){d=t.default}],execute:function(){var u,p,_,g,m,y,f,x,C;s._RF.push({},"f1517T3wphLILfcxsFC6hVB","CircleScrollList",void 0);const{ccclass:v,property:b,menu:I}=o;t("default",(u=I("Custom/CircleScrollList"),p=b({tooltip:"滚动列表",type:n}),_=b({tooltip:"滚动速度"}),g=b({tooltip:"更新事件",type:l}),v(m=u((f=i((y=class extends h{constructor(...t){super(...t),e(this,"list",f,this),e(this,"speed",x,this),e(this,"updateEvents",C,this),this._data=[],this._isInited=!1,this._isCanScroll=!1,this._lastTime=0,this._nextIndex=0,this._item=null,this._direction=0}onLoad(){this._item=this.list.children[0],this._direction=this.list.getComponent(r).verticalDirection}init(t){if(this._isInited)return;if(!t||!Array.isArray(t)||0==t.length)return this.unscheduleAllCallbacks(),void this.list.children.forEach(((t,i)=>t.active=!1));let i=d.utils.deepCopy(t);this._data=i,this._nextIndex=this.list.children.length,this.list.children.forEach(((t,e)=>{t.active=!!i[e]||0===i[e],t.active&&l.emitEvents(this.updateEvents,t,i[e])})),this.list.getComponent(r).updateLayout(),this._isCanScroll=this._data.length>this.list.children.length-1}updateData(t){this._data=t}update(){if(this._isCanScroll){let t=0,i=a.totalTime;this._lastTime>0&&(t=i-this._lastTime),this._lastTime=i;let e=t*this.speed;const s=this.list.getPosition();let n=0===this._direction?s.y-e:s.y+e;for(this.list.setPosition(s.x,n);this.checkBoundary();){this._nextIndex++,this._nextIndex>=this._data.length&&(this._nextIndex=0);let t=this._data[this._nextIndex],i=this.list.children[0];i.setSiblingIndex(this._data.length),l.emitEvents(this.updateEvents,i,t);let e=this.list.getComponent(r);e.updateLayout();let s=e.spacingY;const n=this.list.getPosition();0===this._direction?this.list.setPosition(n.x,n.y+this._item.getComponent(c).height+s):this.list.setPosition(n.x,n.y-this._item.getComponent(c).height-s)}}}checkBoundary(){return 0===this._direction?this.list.getPosition().y<-this._item.getComponent(c).height:this.list.getPosition().y>this._item.getComponent(c).height}}).prototype,"list",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(y.prototype,"speed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),C=i(y.prototype,"updateEvents",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=y))||m)||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/ClickEffect.ts",["cc","./Define.ts","./Core.ts"],(function(e){var t,o,n,l,a,c,s,i,d,u;return{setters:[function(e){t=e.cclegacy,o=e.NodePool,n=e._decorator,l=e.Component,a=e.Node,c=e.sp,s=e.instantiate,i=e.v3},function(e){d=e.Bundle_name},function(e){u=e.default}],execute:function(){var p,r;t._RF.push({},"93e10uZNadK6YvRjRqz+OjY","ClickEffect",void 0);const{ccclass:f,property:m,menu:C}=n;e("default",f(p=C("Custom/ClickEffect")(((r=class e extends l{onLoad(){let t=new a;u.asset.loadRes("ske/touch/action",c.SkeletonData,((o,n)=>{let l=t.addComponent(c.Skeleton);l.skeletonData=n,l.premultipliedAlpha=!1,l.loop=!1,this.node.on(a.EventType.TOUCH_START,(o=>{let n=o.touch.getUILocation(),l=e.nodePool.get()||s(t);l.parent=this.node,l.setWorldPosition(i(n.x,n.y)),l.active=!0;let a=l.getComponent(c.Skeleton);a.animation="action",a.setCompleteListener((()=>{e.nodePool.put(l)}))}),this,!0)}),d.Hall)}}).nodePool=new o,p=r))||p)||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["cc","./Define.ts","./SceneNavigator.ts","./Core.ts","./PopupConfig.ts","./Config.ts","./ErrorCode.ts"],(function(e){var t,n,r,o,a,i,l,s,u,g,m,d,c,h,p,f,y,T,w,x,S,D;return{setters:[function(e){t=e.UITransform,n=e.rect,r=e.Rect,o=e.v2,a=e.misc,i=e.Tween,l=e.tween,s=e.Vec3,u=e.game,g=e.SpriteFrame,m=e.sys,d=e.assetManager,c=e.resources,h=e.cclegacy},function(e){p=e.Scene_name,f=e.Bundle_name,y=e.CurrencySymbol},function(e){T=e.default},function(e){w=e.default},function(e){x=e.PopupName},function(e){S=e.Config},function(e){D=e.ErrorCode}],execute:function(){h._RF.push({},"baa95BxiVNF3pB5fQDN/tEO","CommonUtils",void 0);const C=window.jsb;e("default",class{constructor(){this.twkey={},this._initServerTime=0,this._initGameTime=0}arr2Arraybuffer(e){let t=new ArrayBuffer(e.length),n=new DataView(t,0);return e.forEach(((e,t)=>n.setUint8(t,e))),t}number2Uint8Array(e){let t=e%256,n=Math.floor(e/256),r=n%256;n=Math.floor(n/256);let o=n%256;return[Math.floor(n/256),o,r,t]}getRandomValue(e,t=0){return Math.floor(Math.random()*(e-t))+t}getRandData(e){return e[this.getRandomValue(e.length)]}getRandDatas(e,t){return this.randArray(e).slice(0,t)}randArray(e){let t=JSON.parse(JSON.stringify(e));for(let e=0;e<t.length;e++){let n=this.getRandomValue(t.length-e);[t[n],t[t.length-1-e]]=[t[t.length-1-e],t[n]]}return t}setObj(e){let t=new Map,n=[];for(let r of e){let e=JSON.stringify(r);t.has(e)||(t.set(e,!0),n.push(JSON.parse(e)))}return n}deepCopy(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Array){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.deepCopy(e[n]);return t}if(e instanceof Object){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=this.deepCopy(e[n]));return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e instanceof Date?(new Date).setTime(e.getTime()):null}getRandDataByWeight(e,t){let n=0,r=0,o=Math.random();for(let e=t.length-1;e>=0;e--)n+=+t[e];o*=n;for(let n=t.length-1;n>=0;n--)if(r+=+t[n],o<=r)return e[n];return[]}getRandDatasByweight(e,t,n){let r=[];for(let o=0;o<n;o++){let n=this.getRandDataByWeight(e,t);r.push(n)}return r}hitTestIntersects(e,n){return n.getComponent(t).getBoundingBoxToWorld().intersects(e.getComponent(t).getBoundingBoxToWorld())}hitTestIntersection(e,o){let a=n();return r.intersection(a,e.getComponent(t).getBoundingBoxToWorld(),o.getComponent(t).getBoundingBoxToWorld()),a}hitTestContains(e,n){return e.getComponent(t).getBoundingBoxToWorld().contains(n)}hitTestContainsRect(e,n){return e.getComponent(t).getBoundingBoxToWorld().containsRect(n.getComponent(t).getBoundingBoxToWorld())}getBoundaryPos(e,n){let r=e.parent.getComponent(t).convertToWorldSpaceAR(e.getPosition()),a=n.getComponent(t).convertToNodeSpaceAR(r),i=this.getRandomValue(a.x-e.getComponent(t).width/2,a.x+e.getComponent(t).width/2),l=o(i,e.position.y+e.getComponent(t).height/2),s=o(i,e.position.y-e.getComponent(t).height/2),u=this.getRandomValue(a.y-e.getComponent(t).height/2,a.y+e.getComponent(t).height/2);return[l,s,o(e.position.x-e.getComponent(t).width/2,u),o(e.position.x+e.getComponent(t).width/2,u)][this.getRandomValue(0,4)]}getDistance(e,t){let n=o(e.x-t.x,e.y-t.y);return Math.sqrt(n.x*n.x+n.y*n.y)}getDegrees(e){return a.radiansToDegrees(Math.atan2(e.y,e.x))}getAngle(e,t,n=0){let r=t.x-e.x,o=t.y-e.y;return 180*Math.atan2(o,r)/Math.PI%360+n}textEffect(e){var t;let n=e.strLabel;(null==(t=this.twkey[e.key])?void 0:t.length)>0&&(this.twkey[e.key].forEach((e=>{i.stopAllByTarget(e)})),delete this.twkey[e.key]);let r=t=>{e.km?n.string=this.formatAmountToKm({amount:t,fixed:2,decimalsZero:!1}):n.string=t.toFixed(e.decimalPlaces??0)};r(e.beginNum);let o={};o.num=e.beginNum;let a=()=>{let t=Math.abs(e.endNum-e.beginNum);if(0===t)return r(e.endNum),delete this.twkey[e.key],void(null==e.callback||e.callback());let a=e.fixTime??t*(e.delay??.01);if(0===a)r(e.endNum),null==e.callback||e.callback();else{l(o).to(a,{num:e.endNum},{progress:(e,t,o,a)=>{let i=e+(t-e)*a;return n.isValid&&r(i),i}}).call((()=>{delete this.twkey[e.key],null==e.callback||e.callback()})).start();let t=this.twkey[e.key];t||(t=[]),t.push(o),this.twkey[e.key]=t}};if(e.defaultScroller>0){let t={num:0};l(t).to(.2,{num:9},{progress:(e,o,a,i)=>{let l=e+(o-e)*i;return l>=9&&(t.num=0,l=0),n.isValid&&r(l),l}}).repeat(e.defaultScroller).call((()=>{a()})).start();let i=this.twkey[e.key];i||(i=[]),i.push(o),this.twkey[e.key]=i}else a()}bezierTo(e,t,n,r,o,a){a=a||Object.create(null);return a.onUpdate=(t,a)=>{e.position=((e,t,n,r)=>{let o=(1-e)*(1-e)*t.x+2*e*(1-e)*n.x+e*e*r.x,a=(1-e)*(1-e)*t.y+2*e*(1-e)*n.y+e*e*r.y,i=(1-e)*(1-e)*t.z+2*e*(1-e)*n.z+e*e*r.z;return new s(o,a,i)})(a,n,r,o)},l(e).to(t,{},a)}bezier3To(e,t,n,r,o,a,i,u=s.ZERO){i=i||Object.create(null);return i.onUpdate=(t,i)=>{e.position=((e,t,n,r,o)=>{let a=(1-e)*(1-e)*(1-e)*t.x+3*e*(1-e)*(1-e)*n.x+3*e*e*(1-e)*r.x+e*e*e*o.x,i=(1-e)*(1-e)*(1-e)*t.y+3*e*(1-e)*(1-e)*n.y+3*e*e*(1-e)*r.y+e*e*e*o.y,l=(1-e)*(1-e)*(1-e)*t.z+3*e*(1-e)*(1-e)*n.z+3*e*e*(1-e)*r.z+e*e*e*o.z;return new s(a,i,l)})(i,n,r,o,a)},l(e).to(t,{scale:u},i)}getToDayEndTimestamp(){return new Date((new Date).toLocaleDateString()).getTime()+864e5-1}getToDayStartTimestamp(){return new Date((new Date).toLocaleDateString()).getTime()}timestamp2HHmmss(e){let t,n=new Date(e),r=n.getHours(),o=n.getMinutes(),a=n.getSeconds();return t=(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a),t}timestamp2HHmm(e){let t,n=new Date(e),r=n.getHours(),o=n.getMinutes();return t=(r<10?"0"+r:r)+":"+(o<10?"0"+o:o),t}leftTimestamp2DDHHmmss(e,t,n,r){let o=Math.trunc(e/60),a=Math.trunc(e%60),i=Math.trunc(o/60),l=Math.trunc(i/24);i%=24;let s,u=o%60;return null==t&&(t=":"),s=n?(l>0?l+"d "+t:"")+String(i).padStart(2,"0")+"h "+t+String(u).padStart(2,"0")+"m "+(r?"":+t+String(a).padStart(2,"0")+"s"):(l>0?l+"d"+t:"")+String(i).padStart(2,"0")+t+String(u).padStart(2,"0")+t+String(a).padStart(2,"0"),s}leftTimestamp2HHmmss(e,t){let n=Math.trunc(e/60),r=Math.trunc(e%60),o=Math.trunc(n/60);n%=60;let a=Math.trunc(o/10)+""+o%10,i=Math.trunc(n/10)+""+n%10,l=Math.trunc(r/10)+""+r%10;return null==t?a+":"+i+":"+l:[a,i,l].join(t)}timestamp2YYMMDD(e,t){let n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=o+"";o<10&&(a="0"+o);let i=n.getDate(),l=i+"";return i<10&&(l="0"+i),null==t?r+"-"+a+"-"+l:[r,a,l].join(t)}timestamp2YYMM(e,t){let n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=o+"";return o<10&&(a="0"+o),null==t?r+"-"+a:[r,a].join(t)}timestamp2MMDD(e,t){let n=new Date(e),r=(n.getFullYear(),n.getMonth()+1),o=r+"";r<10&&(o="0"+r);let a=n.getDate(),i=a+"";return a<10&&(i="0"+a),null==t?o+"-"+i:[o,i].join(t)}setServerTime(e){this._initServerTime=e,this._initGameTime=u.totalTime}getServerTime(){return this._initServerTime?this._initServerTime+(u.totalTime-this._initGameTime):Date.now()}getGameNameByType(e){switch(e){case 0:return"大厅";default:return"未知游戏"}}showDialog(e){w.ui.open(x.Dialog,e)}removeDialog(e=!0,t){w.ui.close(x.Dialog,e,t)}showWaiting(e){w.ui.open(x.Waiting,e)}removeWaiting(e=!0){w.ui.close(x.Waiting,e)}showToast(e){w.ui.open(x.Toast,e)}showToastCode(e,t){let n=w.language.findLanguage(e);w.ui.open(x.Toast,{msg:n,delay:t})}showToastErrCode(e,t){var n;let r=null==(n=D[w.pb.Enum.EErrorCode[e]])?void 0:n.replace(/\\n/g,"\n");r?(t&&r.replace(/{(\d+)}/g,(function(e,n){return t[n]??e})),w.ui.open(x.Toast,r)):w.logger.warn("code not find:"+e)}removeToast(){w.ui.close(x.Toast)}logout(e){w.network.disconnect(1e3,"Log out of account"),w.storage.clearStorage(),w.user.userData=null,T.go(p.Login,null,(()=>{}))}async loadAvatarSprite(e,t){if(e=e||"0",isNaN(+e)){let n=await w.asset.loadRemoteRes(e);t.isValid&&(t.spriteFrame=n)}else w.asset.loadRes("head/img_0/spriteFrame",g,((e,n)=>{e?t.spriteFrame=null:t.isValid&&(t.spriteFrame=n)}),f.Hall)}loadChipSprite(e,t){}convertLocation(e,n,r){if(!e.parent)return;let o=e.parent.getComponent(t).convertToWorldSpaceAR(r??e.getPosition());return n.getComponent(t).convertToNodeSpaceAR(o)}ratioConvert(e,t=!1,n,r,o){if(!e)return t?y+0:0;let a=Number(e).div(S.currency_rate);if(!t&&!n&&!r)return a;let i=a.toString();return n>=0&&(i=a.toFixed(n)),r&&(i=this.formatAmountToKm({amount:a,fixed:n,decimalsZero:o})),t?y+i:i}ratioConvertLogic(e){let t=e.value/S.currency_rate,n=t;e.fixed&&(n=Number(t.toFixed(e.fixed)));let r="";return e.logicSymbol&&(e.dontAddSymbol?r+=n>=0?"":"-":r+=n>=0?"+":"-"),e.goldSymbol&&(r+=y),r+Math.abs(n)}formatAmountToKm(e){let t;return e.fixed||(e.fixed=2),e.amount>=1e6?(t=e.amount/1e6,e.decimalsZero?t.toFixed(e.fixed)+"m":+t.toFixed(e.fixed)+"m"):e.amount>=1e3?(t=e.amount/1e3,e.decimalsZero?t.toFixed(e.fixed)+"k":+t.toFixed(e.fixed)+"k"):(t=e.amount,e.decimalsZero?t.toFixed(e.fixed):+t.toFixed(e.fixed)+"")}padNumberWithZeros(e,t){let n=t.toString();const r=e-n.length;return r>0&&(n="0".repeat(r)+n),n}async isDownloadedGame(e){if(!C)return!0;return"0.0.0.0"!==await this.getVersion(e)}async getVersion(e=0){return new Promise((t=>{let n=m.localStorage.getItem("HotUpdateSearchPaths"),r="";if(C&&n){let o=(C.fileUtils?C.fileUtils.getWritablePath():"/")+"remote-asset/"+S.hotupdateDirNameMap[e]+"/";JSON.parse(n).includes(o)&&(r=o+"project.manifest",d.loadAny({url:r},((n,r)=>{if(n)return w.logger.forceLog(n),void t("0.0.0.0");let o=JSON.parse(r);w.logger.log(S.hotupdateDirNameMap[e]+" writable path version: "+o.version),t(o.version)})))}if(!r){let n=S.hotupdateDirNameMap[e];r=c.getInfoWithPath(`/manifest/${n}/project`).path,c.load(r,((n,r)=>{if(n)return w.logger.forceLog(n),void t("0.0.0.0");let o=JSON.parse(r._file);w.logger.log(S.hotupdateDirNameMap[e]+" in app version: "+o.version),t(o.version)}))}}))}}),h._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3d398SwD7pCv5v6TPF64iQ0","Config",void 0);e("Config",{hash:"",design_width:1624,design_height:750,timeout_socket:1e4,heartbeat_interval:2e3,exclude_msgId:["Base.ReqHeartbeat","Base.RspHeartbeat"],languageMap:{},currency_rate:100,hotupdateDirNameMap:{0:"hall"}});t._RF.pop()}}}));

System.register("chunks:///_virtual/Core.ts",["cc","./AssetBundle.ts","./AudioPlayer.ts","./Memmory.ts","./Storage.ts","./UserData.ts","./EventDefine.ts","./EventManager.ts","./LocalizationBase.ts","./Heartbeat.ts","./Http.ts","./Services.ts","./Logger.ts","./PopupManager.ts","./Network.ts","./CommonUtils.ts"],(function(e){var t,n,u,a,o,s,f,i,c,l,r,d,w,g,v,p;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default},function(e){u=e.default},function(e){a=e.default},function(e){o=e.default},function(e){s=e.default},function(e){f=e.EventDefine},function(e){i=e.default},function(e){c=e.default},function(e){l=e.default},function(e){r=e.default},function(e){d=e.default},function(e){w=e.default},function(e){g=e.default},function(e){v=e.default},function(e){p=e.default}],execute:function(){t._RF.push({},"b45d6G+ksZIrIlolWeuALxM","Core",void 0);class m{}e("default",m),m.eventType=f,m.logger=new w,m.audio=new u,m.asset=new n,m.event=new i,m.heartbeat=new l,m.network=new v,m.ui=new g,m.utils=new p,m.http=new r,m.user=new s,m.language=new c,m.pb=void 0,m.storage=new o,m.memmory=new a,m.services=new d,t._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,s,i,r,n,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.Node,r=t._decorator,n=t.Slider,p=t.UITransform}],execute:function(){var h,a,g,c,l,d;s._RF.push({},"ec4d97mB/pJqK0xL6ov8fC2","CustomSlider",void 0);const{ccclass:u,property:m,menu:y}=r;t("default",(h=y("Custom/CustomSlider"),a=m(i),g=m({override:!0,range:[0,1]}),u(c=h((d=e((l=class extends n{constructor(...t){super(...t),o(this,"mask",d,this),this._progress=0}set progress(t){this._progress=t,this.direction==n.Direction.Horizontal?(this.mask.getComponent(p).width=this.progress*this.node.getComponent(p).width,this.handle.node.setPosition(this.mask.getPosition().x+this.mask.getComponent(p).width,this.handle.node.getPosition().y)):(this.mask.getComponent(p).height=this.progress*this.node.getComponent(p).height,this.handle.node.setPosition(this.mask.getPosition().x,this.mask.getPosition().y+this.mask.getComponent(p).height))}get progress(){return this._progress}}).prototype,"mask",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(l.prototype,"progress",[g],Object.getOwnPropertyDescriptor(l.prototype,"progress"),l.prototype),c=l))||c)||c));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(...t){super(...t),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"d803aMsLxNKj6F21lfidN0R","Define",void 0);n("CurrencySymbol","￥"),n("LoginPlatform",{Dev:0,WechatApp:1,Wechat:2}),n("Platform",{Android:"android",IOS:"ios",Web:"web",Mini:"Mini"}),n("ChannelType",{Dev:"dev",Public:"public"});n("Scene_name",function(n){return n.Loading="Loading",n.Login="Login",n.Hall="Hall",n.Mahjong="Mahjong",n}({})),n("Bundle_name",function(n){return n.Resources="resources",n.Loading="loading",n.Common="common",n.Hall="hall",n.Mahjong="mahjong",n}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Dial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,l,s,n,a,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){l=t.cclegacy,s=t.Node,n=t._decorator,a=t.Component,h=t.tween}],execute:function(){var r,c,o,u,_,g,p,d,f,b,A,w,k,y,S,m,R,N,C,P;l._RF.push({},"8f62fswvZRH+bXAFu04LUK7","Dial",void 0);const{ccclass:v,property:x,menu:B}=n;t("default",(r=v("Dial"),c=B("Custom/Dial"),o=x({tooltip:"目标旋转对象",type:s}),u=x({tooltip:"扇区数量"}),_=x({tooltip:"加速转圈数"}),g=x({tooltip:"减速转圈数"}),p=x({tooltip:"加速度"}),d=x({tooltip:"最大旋转速度"}),f=x({tooltip:"顺时针旋转"}),b=x({tooltip:"是否回弹"}),r(A=c((k=i((w=class extends a{constructor(...t){super(...t),e(this,"targetNode",k,this),e(this,"cellNum",y,this),e(this,"accAngle",S,this),e(this,"decAngle",m,this),e(this,"acc",R,this),e(this,"maxSpeed",N,this),e(this,"clockwise",C,this),e(this,"springback",P,this),this.isPlay=!1,this._onEndCallBack=void 0,this._wheelState=0,this._curSpeed=2,this._curRotation=0,this._gearAngle=60,this._finalAngle=void 0,this._maxSpeedRun=!0,this._decAngle=1440,this._accAngle=1440,this._clockwise=-1}onDisable(){var t;this.isPlay&&(this.isPlay=!1,null==(t=this._onEndCallBack)||t.call(this));this._onEndCallBack=null}startRun(t,i){this.isPlay||(this.isPlay=!0,this._decAngle=360*this.decAngle,this._accAngle=360*this.accAngle,this._gearAngle=360/this.cellNum,this._onEndCallBack=i,this._finalAngle=t+this._accAngle,this.springback&&(this._finalAngle+=this._gearAngle*this._clockwise),this._wheelState=1,this._curSpeed=2,this._curRotation%=360,this.targetNode.angle=this._curRotation,this._clockwise=this.clockwise?-1:1,this._maxSpeedRun=!0)}stopRun(){var t;this.isPlay&&(this.isPlay=!1,this._wheelState=0,this.targetNode.angle=this._finalAngle,this._curRotation=this._finalAngle,null==(t=this._onEndCallBack)||t.call(this),this._onEndCallBack=null)}update(t){if(this.isPlay)if(1===this._wheelState)if(this._curRotation=this.targetNode.angle+this._curSpeed*this._clockwise,this.targetNode.angle=this._curRotation,this._curSpeed<=this.maxSpeed)this._curSpeed+=this.acc;else{if(this._maxSpeedRun&&(this._finalAngle+=360*this._clockwise,this._maxSpeedRun=!1),this._clockwise){if(this._curRotation>=this._finalAngle)return}else if(this._curRotation<=this._finalAngle)return;this.maxSpeed=this._curSpeed,this.targetNode.angle=this._finalAngle,this._wheelState=2}else if(2===this._wheelState){let t=this.targetNode.angle,e=(t-this._finalAngle)*this._clockwise;var i;if(this._curSpeed=this.maxSpeed*((this._decAngle-e)/this._decAngle)+.2,this.targetNode.angle=t+this._curSpeed*this._clockwise,this._decAngle-e<=0)if(this._wheelState=0,this.targetNode.angle=this._finalAngle,this._curRotation=this._finalAngle,this.springback)h(this.targetNode).delay(.1).by(.5,{angle:-this._gearAngle}).call((()=>{var t;this.isPlay=!1,null==(t=this._onEndCallBack)||t.call(this),this._onEndCallBack=null})).start();else this.isPlay=!1,null==(i=this._onEndCallBack)||i.call(this),this._onEndCallBack=null}}}).prototype,"targetNode",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(w.prototype,"cellNum",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),S=i(w.prototype,"accAngle",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),m=i(w.prototype,"decAngle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),R=i(w.prototype,"acc",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=i(w.prototype,"maxSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),C=i(w.prototype,"clockwise",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=i(w.prototype,"springback",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=w))||A)||A));l._RF.pop()}}}));

System.register("chunks:///_virtual/ErrorCode.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"b177cQxN4dJ263g0ekhYdQH","ErrorCode",void 0);r("ErrorCode",function(r){return r.OK="",r.Failed="失败",r.Auth_Invalid_Params="无效参数",r.Auth_Invalid_Ticket="无效票据",r.Auth_Expired_Ticket="票据过期",r.Auth_Platform_Error="平台错误",r.Auth_Hub_Not_Outward="认证中心不可用",r}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventDefine.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"6af21bi0FxOYo/kvlToqCuR","EventDefine",void 0);e("EventDefine",function(e){return e.onSocketColse="onSocketColse",e.onSocketOpen="onSocketOpen",e.onSocketMsg="onSocketMsg",e.onReceiveMsg="onReceiveMsg",e.onNetError="onNetError",e.onConnected="onConnected",e.ping="ping",e.autoLogin="autoLogin",e.gameShow="gameShow",e.gameHide="gameHide",e.blockInput="blockInput",e.updatePlayerInfo="updatePlayerInfo",e.already_up_to_date="already_up_to_date",e.new_version_found="new_version_found",e.update_progression="update_progression",e.update_finished="update_finished",e.update_failed="update_failed",e.update_state_value_change="update_state_value_change",e.onNative2cocos="onNative2cocos",e.onNativeBack="onNativeBack",e.onNativeGameShow="onNativeGameShow",e.onNativeGameHide="onNativeGameHide",e.onAppUpdate="onAppUpdate",e.onNetworkChange="onNetworkChange",e.onWxLoginSucc="onWxLoginSucc",e}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3c5c4RatOJA6p98YzkbR+1Q","EventManager",void 0);e("default",class{constructor(){this.events=new Map,this.onceEvents=new Map}on(e,t,s){const n=this.events;if(!n.has(e))return void n.set(e,[{callback:t,target:s}]);n.get(e).some((e=>this.compare(e,t,s)))||n.get(e).push({callback:t,target:s})}once(e,t,s){const n=this.onceEvents;if(!n.has(e))return void n.set(e,[{callback:t,target:s}]);n.get(e).some((e=>this.compare(e,t,s)))||n.get(e).push({callback:t,target:s})}off(e,t,s){const n=this.events.get(e);if(n)for(let c=0,a=n.length;c<a;c++)if(this.compare(n[c],t,s)){n.splice(c,1),0===n.length&&this.events.delete(e);break}const c=this.onceEvents.get(e);if(c)for(let n=0,a=c.length;n<a;n++)if(this.compare(c[n],t,s)){c.splice(n,1),0===c.length&&this.onceEvents.delete(e);break}}emit(e,t){const s=this.events.get(e);if(s)for(let e=s.length-1;e>=0;e--){const{callback:n,target:c}=s[e];n.call(c,t)}const n=this.onceEvents.get(e);if(n){for(let e=n.length-1;e>=0;e--){const{callback:s,target:c}=n[e];s.call(c,t)}this.onceEvents.delete(e)}}remove(e){this.events.has(e)&&this.events.delete(e),this.onceEvents.has(e)&&this.onceEvents.delete(e)}removeAllByTarget(e){this.events.forEach(((t,s)=>{t.forEach(((s,n)=>{s.target===e&&(t.splice(n,1),n--)})),0===t.length&&this.events.delete(s)})),this.onceEvents.forEach(((t,s)=>{t.forEach(((s,n)=>{s.target===e&&(t.splice(n,1),n--)})),0===t.length&&this.onceEvents.delete(s)}))}removeAllEvent(){this.events.clear(),this.onceEvents.clear()}compare(e,t,s){const{callback:n,target:c}=e;return c===s&&(n===t||n.toString()===t.toString())}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Heartbeat.ts",["cc","./Config.ts","./Core.ts"],(function(t){var i,e,s;return{setters:[function(t){i=t.cclegacy},function(t){e=t.Config},function(t){s=t.default}],execute:function(){i._RF.push({},"15dd2r98U1DyIT4fUMIlZkM","Heartbeat",void 0);t("default",class{constructor(){this._timer=void 0,this._isRequesting=!1,this._fail=null}start(t){this.stop(),this._fail=t,this._timer=setTimeout(this.onTimer.bind(this),2e3)}stop(){this._isRequesting&&(s.network.cancelRequest("Base.ReqHeartbeat"),this._isRequesting=!1),this._timer&&(clearTimeout(this._timer),this._timer=null)}onTimer(){this._isRequesting||(this._isRequesting=!0,s.network.send("Base.ReqHeartbeat","Base.RspHeartbeat",void 0,(t=>{this._isRequesting=!1,this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this.onTimer.bind(this),e.heartbeat_interval)}),(()=>{this._isRequesting=!1,this._fail&&this._fail()}),!1,!1))}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/Http.ts",["cc","./Config.ts","./Core.ts"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Config},function(e){n=e.default}],execute:function(){t._RF.push({},"7c204svJG9JoKx2DtXgw6U9","Http",void 0);e("default",class{async get(e,t){return await this._send(this._process(e,t),"GET")}async post(e,t,s){return await this._send(e,"POST",t,s)}_process(e,t){if(t){"?"!=e.slice(-1)&&(e+="?");let s="";for(let n in t)e+=s+n+"="+t[n],s="&"}return e}_send(e,t,r,o){return new Promise(((l,i)=>{let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(4===a.readyState)if(200===a.status){let e=a.responseText;try{n.logger.logRecieve("response url:"+u),n.logger.log("data:"+e),l(e),a=null}catch(e){n.logger.log(e),n.utils.showToast("网络异常"),l(null),a=null}}else n.utils.showToast("网络异常"),l(null),a=null},a.timeout=6e3;let u=s.serverUrl+e;if(a.open(t,u,!0),n.logger.logSend("request url:"+u),n.logger.log("param:"+("object"==typeof r?JSON.stringify(r):r)),"POST"===t){if(a.setRequestHeader("Content-Type","application/json"),o)for(let e in o)a.setRequestHeader(e,o[e]);a.send(JSON.stringify(r||{}))}else a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),a.send()}))}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/LabelList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./List.ts"],(function(t){var e,r,i,n,s,o,l,a,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Label,s=t.CCString,o=t._decorator,l=t.Component,a=t.TextAsset},function(t){c=t.default},function(t){p=t.default}],execute:function(){var u,h,g,f,d,y;i._RF.push({},"0828elyvjtD4bpkhc3FxxIg","LabelList",void 0);const{ccclass:m,property:x,requireComponent:C}=o;t("default",(u=C(n),h=C(p),g=x({type:s,displayName:".txt文件路径"}),m(f=u(f=h((y=e((d=class extends l{constructor(...t){super(...t),r(this,"txtName",y,this)}async onLoad(){let t=this.getComponent(n).string.length,e=[],r=(await c.asset.loadRes(this.txtName,a)).text.split("\n");for(let i of r){let r=this.wrapText(i,t);e.push(...r)}this.getComponent(p).setList(e,((t,e)=>{let r=t.getComponent(n);r.string=e;let i=e.includes("center");i&&(r.string=e.slice(6)),r.horizontalAlign=i?n.HorizontalAlign.CENTER:n.HorizontalAlign.LEFT}))}wrapText(t,e){const r=Array.from(t);let i=[],n="",s=0;for(let t of r){let r=this.getCharacterDisplayWidth(t);s+r>e?(i.push(n),n=t,s=r):(n+=t,s+=r)}return n&&i.push(n),i}getCharacterDisplayWidth(t){return t.charCodeAt(0)>127?2:1}}).prototype,"txtName",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f)||f)||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutPro.ts",["cc","./Core.ts","./Config.ts"],(function(t){var n,s,o,e,c,i;return{setters:[function(t){n=t.cclegacy,s=t.Layout,o=t.Component,e=t._decorator},function(t){c=t.default},function(t){i=t.Config}],execute:function(){var a;n._RF.push({},"659d0ppPdtOsaADdqUDsI2G","LayoutPro",void 0);const{ccclass:u,requireComponent:r,menu:p}=e;t("default",u(a=r(s)(a=p("Custom/LayoutPro")(a=class extends o{constructor(...t){super(...t),this._spacingY=void 0}onLoad(){let t=this.getComponent(s);this._spacingY=t.spacingY;let n=(c.memmory.screen_h-i.design_height)/100*10,o=this._spacingY;o+=n;let e=Math.min(Math.max(o,10),this._spacingY);t.spacingY=e,this._spacingY=e,t.updateLayout()}})||a)||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseClass.ts"],(function(t){var e,n,i,o,a,s,l,r,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,a=t._decorator,s=t.Component,l=t.instantiate,r=t.Layout},function(t){c=t.default}],execute:function(){var u,d,h,p,f;i._RF.push({},"e52090sy9ZLrI46ydlEYjwH","List",void 0);const{ccclass:m,property:g,menu:y}=a;t("default",(u=y("Custom/List"),d=g({type:o}),m(h=u((f=e((p=class extends s{constructor(...t){super(...t),n(this,"template",f,this),this.data=[]}setList(t,e){this.data=t;for(let n=0;n<t.length;n++){let i=this.node.children[n]||l(this.template??this.node.children[0]);i.parent=this.node;let o=i.getComponent(c);o?o.saveData(t[n]):i.attr({customData:t[n]}),i.active=!(null!=e&&e(o,t[n],n,i))}for(let e=t.length;e<this.node.children.length;e++){this.node.children[e].active=!1;let t=this.node.children[e].getComponent(c);t&&t.saveData(null)}this.node.getComponent(r).updateLayout()}search(t){for(let e=0;e<this.data.length;e++){let n=this.node.children[e];if(null==n)continue;let i=n.getComponent(c);n.active=t(i,this.data[e],e)}}}).prototype,"template",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h)||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizationBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Core.ts","./Define.ts"],(function(e){var n,t,a,i,o,r,s,l,u,g,c,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.CCInteger,o=e.Enum,r=e._decorator,s=e.Component,l=e.JsonAsset,u=e.sys},function(e){g=e.Config},function(e){c=e.default},function(e){p=e.Bundle_name}],execute:function(){var d,f,h,C,y,L,m,v;a._RF.push({},"1ca68G4if9JYrQM8AehkNTO","LocalizationBase",void 0);const{ccclass:_,property:b,executeInEditMode:M}=r,z=e("LANG_CHANGED","lang-change");let D=e("Lang",function(e){return e[e.Chinese=0]="Chinese",e}({}));const x=e("LangText",{[D.Chinese]:"Chinese"});e("default",(d=_("LocalizationBase"),f=M(!0),h=b({type:i}),C=b({type:o(D)}),d(y=f((m=n((L=class extends s{constructor(...e){super(...e),t(this,"id",m,this),t(this,"language",v,this),this.languageMap={},this._lastLanguage=0,this._lastId=0}onLoad(){c.event.on(z,this.langChanged,this),this.updateContent()}onDestroy(){c.event.off(z,this.langChanged,this)}update(){}langChanged(e){this.language=e,this.updateContent()}updateContent(){}async init(){let e=await c.asset.loadRes("language",l,null,p.Resources);g.languageMap=e.json}findLanguage(e){if(g.languageMap[e]){var n;let t=u.localStorage.getItem("language");return t||(t=D.Chinese.toString()),null==(n=g.languageMap[e][x[t]])?void 0:n.replace(/\\n/g,"\n")}return e.toString()}format(e,...n){let t=this.findLanguage(e);return t?n?t.replace(/{(\d+)}/g,(function(e,t){return n[t]??e})):t:(c.logger.warn("messageId not find:"+e),e.toString())}formatText(e,...n){return e&&n?e.replace(/{(\d+)}/g,(function(e,t){return n[t]??e})):e}}).prototype,"id",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=n(L.prototype,"language",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Chinese}}),y=L))||y)||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizationLabel.ts",["cc","./LocalizationBase.ts"],(function(t){var e,n,a,o,i;return{setters:[function(t){e=t.cclegacy,n=t.Label,a=t.RichText,o=t._decorator},function(t){i=t.default}],execute:function(){var s;e._RF.push({},"5cd0b34+DpBYLd8UyqsaKOC","LocalizationLabel",void 0);const{ccclass:c,menu:l}=o;t("LocalizationLabel",c("LanguageLabel")(s=l("Custom/LocalizationLabel")(s=class extends i{updateContent(){this.node.getComponent(n)?this.node.getComponent(n).string=this.findLanguage(this.id):this.node.getComponent(a)&&(this.node.getComponent(a).string=this.findLanguage(this.id))}})||s)||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizationSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Core.ts","./LocalizationBase.ts"],(function(e){var t,a,i,n,r,s,o,l,u,c,p,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,r=e.Enum,s=e._decorator,o=e.sys,l=e.SpriteFrame,u=e.assetManager},function(e){c=e.Bundle_name},function(e){p=e.default},function(e){g=e.default,d=e.Lang}],execute:function(){var f,h,m,y,S,b,L,z;i._RF.push({},"f09a5ROQf9FppKYHO/mPUki","LocalizationSprite",void 0);const F=function(){let e={},t=0;for(let a in c)e[c[a]]=t,t++;return e}(),{ccclass:M,property:w,executeInEditMode:C,menu:D,requireComponent:P}=s;e("LocalizationSprite",(f=M("LanguageSprite"),h=C(!0),m=P(n),y=D("Custom/LocalizationSprite"),S=w({type:r(F)}),f(b=h(b=m(b=y((z=t((L=class extends g{constructor(...e){super(...e),a(this,"bundle",z,this)}async updateContent(){let e=this.findLanguage(this.id),t=null;t=await this.loadMessageSprite(e),this.node.getComponent(n).spriteFrame=t}async loadMessageSprite(e){let t=o.localStorage.getItem("language");t||(t=d.Chinese.toString());let a=d[t];return await p.asset.loadRes(`pngLanguage/${a}/${e}/spriteFrame`,l,null,F[this.bundle])}async loadMessageSpriteInEditor(e){let t=this.getDirPath(),a=d[this.language];p.logger.log("foler ->"+a+", imgName -> "+e);let i=await Editor.Message.request("asset-db","query-uuid",`db://assets/${t}/pngLanguage/${a}/${e}.png/spriteFrame`);return new Promise(((e,t)=>{u.loadAny(i,((a,i)=>{a?t(a):e(i)}))}))}getDirPath(){let e="";switch(F[this.bundle]){case c.Resources:e="resources";break;case c.Hall:e="hall"}return e}}).prototype,"bundle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=L))||b)||b)||b)||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc","./Config.ts"],(function(o){var e,n,t;return{setters:[function(o){e=o.sys,n=o.cclegacy},function(o){t=o.Config}],execute:function(){n._RF.push({},"8cafewbfxxAwJyz7ZGfWJwj","Logger",void 0);o("default",class{log(o,e){this.print("log",o,e)}forceLog(o){console.log(o)}warn(o){this.print("warn",o)}error(o){this.print("error",o)}time(o){this.print("time",o)}timeEnd(o){this.print("timeEnd",o)}logSend(o){this.print("logSend",o)}logRecieve(o){this.print("logRecieve",o)}print(o,n,i){t.debug&&(e.isNative?"object"==typeof n?console.log(JSON.stringify(n)):console.log(n):"logSend"===o?console.log(`%c=========================${n}=========================`,"background:SaddleBrown;color:#ffffff"):"logRecieve"===o?console.log(`%c=========================${n}=========================`,"background:DarkGreen;color:#ffffff"):i?console[o](`%c=========================${n}=========================`,`color:${i}`):console[o](n))}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Core.ts","./Main.ts","./ScreenFit.ts","./AssetBundle.ts","./AudioPlayer.ts","./ActiveNode.ts","./ActiveSprite.ts","./CircleScrollLine.ts","./CircleScrollList.ts","./ClickEffect.ts","./CustomSlider.ts","./Dial.ts","./LabelList.ts","./List.ts","./NumberScroller.ts","./NumberSlider.ts","./PageIndicator.ts","./Pools.ts","./Rotate.ts","./SuperLayout.ts","./SuperPageView.ts","./SuperScrollview.ts","./SwitchTab.ts","./Timer.ts","./ToggleGroup.ts","./TouchButton.ts","./ChannelConfig.ts","./Config.ts","./Define.ts","./ErrorCode.ts","./Memmory.ts","./Storage.ts","./UserData.ts","./EventDefine.ts","./EventManager.ts","./ThirdpartyListener.ts","./LocalizationBase.ts","./LocalizationLabel.ts","./LocalizationSprite.ts","./Heartbeat.ts","./Http.ts","./NetPackage.ts","./Network.ts","./Socket.ts","./PlatformApi.ts","./PlatformSdkManager.ts","./MiniGamePlatformImpl.ts","./NativePlatformImpl.ts","./WebPlatformImpl.ts","./Services.ts","./Logger.ts","./Thirdparty.ts","./prototypes.ts","./BaseClass.ts","./LayoutPro.ts","./PopupBase.ts","./PopupConfig.ts","./PopupManager.ts","./SceneBase.ts","./SceneNavigator.ts","./SwipeListener.ts","./WidgetPro.ts","./CommonUtils.ts","./Md5.ts","./Start.ts","./debug-view-runtime-control.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./Config.ts","./Core.ts","./ThirdpartyListener.ts","./PlatformSdkManager.ts","./Thirdparty.ts"],(function(){var e,t,i,o,n,a,r,s,c;return{setters:[function(a){e=a.cclegacy,t=a.sys,i=a.game,o=a.Game,n=a.view},null,function(e){a=e.default},function(e){r=e.default},function(e){s=e.PlatformSdkManager},function(e){c=e.default}],execute:function(){e._RF.push({},"88cb9JEuylIG6QTA9IUPi5U","Main",void 0);class l{constructor(){let e=t.localStorage.getItem("music_mute"),l=t.localStorage.getItem("volume_mute");a.audio.setMusicVolume("true"===e?0:1),a.audio.setEffectVolume("true"===l?0:1),a.services.add(r),a.services.init(),s.getInstance().initialize(),c.initBrowserParam(),i.frameRate=120,i.on(o.EVENT_SHOW,this.onGameShow,this),i.on(o.EVENT_HIDE,this.onGameHide,this),a.memmory.screen_w=n.getVisibleSize().width,a.memmory.screen_h=n.getVisibleSize().height}onGameShow(){a.logger.log("## 游戏进入前台"),a.event.emit(a.eventType.gameShow,!1)}onGameHide(){a.logger.log("## 游戏进入后台"),a.event.emit(a.eventType.gameHide),a.network.disconnect(1e3,"游戏进入后台")}}new l,window.vv=window.vv||a,window.callCocos=e=>{a.logger.forceLog(`from android callback: ${e}`),a.event.emit(a.eventType.onNative2cocos,e)},e._RF.pop()}}}));

System.register("chunks:///_virtual/Md5.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){r("GMd5",(function(r){let t,n,a,l,C,d,g,h,s,S=Array();for(r=function(r){r=r.replace(/\x0d\x0a/g,"\n");let t="";for(let n=0;n<r.length;n++){let e=r.charCodeAt(n);e<128?t+=String.fromCharCode(e):e>127&&e<2048?(t+=String.fromCharCode(e>>6|192),t+=String.fromCharCode(63&e|128)):(t+=String.fromCharCode(e>>12|224),t+=String.fromCharCode(e>>6&63|128),t+=String.fromCharCode(63&e|128))}return t}(r),S=function(r){let t,n=r.length,e=n+8,o=16*((e-e%64)/64+1),u=Array(o-1),c=0,i=0;for(;i<n;)t=(i-i%4)/4,c=i%4*8,u[t]=u[t]|r.charCodeAt(i)<<c,i++;return t=(i-i%4)/4,c=i%4*8,u[t]=u[t]|128<<c,u[o-2]=n<<3,u[o-1]=n>>>29,u}(r),d=1732584193,g=4023233417,h=2562383102,s=271733878,t=0;t<S.length;t+=16)n=d,a=g,l=h,C=s,d=o(d,g,h,s,S[t+0],7,3614090360),s=o(s,d,g,h,S[t+1],12,3905402710),h=o(h,s,d,g,S[t+2],17,606105819),g=o(g,h,s,d,S[t+3],22,3250441966),d=o(d,g,h,s,S[t+4],7,4118548399),s=o(s,d,g,h,S[t+5],12,1200080426),h=o(h,s,d,g,S[t+6],17,2821735955),g=o(g,h,s,d,S[t+7],22,4249261313),d=o(d,g,h,s,S[t+8],7,1770035416),s=o(s,d,g,h,S[t+9],12,2336552879),h=o(h,s,d,g,S[t+10],17,4294925233),g=o(g,h,s,d,S[t+11],22,2304563134),d=o(d,g,h,s,S[t+12],7,1804603682),s=o(s,d,g,h,S[t+13],12,4254626195),h=o(h,s,d,g,S[t+14],17,2792965006),g=o(g,h,s,d,S[t+15],22,1236535329),d=u(d,g,h,s,S[t+1],5,4129170786),s=u(s,d,g,h,S[t+6],9,3225465664),h=u(h,s,d,g,S[t+11],14,643717713),g=u(g,h,s,d,S[t+0],20,3921069994),d=u(d,g,h,s,S[t+5],5,3593408605),s=u(s,d,g,h,S[t+10],9,38016083),h=u(h,s,d,g,S[t+15],14,3634488961),g=u(g,h,s,d,S[t+4],20,3889429448),d=u(d,g,h,s,S[t+9],5,568446438),s=u(s,d,g,h,S[t+14],9,3275163606),h=u(h,s,d,g,S[t+3],14,4107603335),g=u(g,h,s,d,S[t+8],20,1163531501),d=u(d,g,h,s,S[t+13],5,2850285829),s=u(s,d,g,h,S[t+2],9,4243563512),h=u(h,s,d,g,S[t+7],14,1735328473),g=u(g,h,s,d,S[t+12],20,2368359562),d=c(d,g,h,s,S[t+5],4,4294588738),s=c(s,d,g,h,S[t+8],11,2272392833),h=c(h,s,d,g,S[t+11],16,1839030562),g=c(g,h,s,d,S[t+14],23,4259657740),d=c(d,g,h,s,S[t+1],4,2763975236),s=c(s,d,g,h,S[t+4],11,1272893353),h=c(h,s,d,g,S[t+7],16,4139469664),g=c(g,h,s,d,S[t+10],23,3200236656),d=c(d,g,h,s,S[t+13],4,681279174),s=c(s,d,g,h,S[t+0],11,3936430074),h=c(h,s,d,g,S[t+3],16,3572445317),g=c(g,h,s,d,S[t+6],23,76029189),d=c(d,g,h,s,S[t+9],4,3654602809),s=c(s,d,g,h,S[t+12],11,3873151461),h=c(h,s,d,g,S[t+15],16,530742520),g=c(g,h,s,d,S[t+2],23,3299628645),d=i(d,g,h,s,S[t+0],6,4096336452),s=i(s,d,g,h,S[t+7],10,1126891415),h=i(h,s,d,g,S[t+14],15,2878612391),g=i(g,h,s,d,S[t+5],21,4237533241),d=i(d,g,h,s,S[t+12],6,1700485571),s=i(s,d,g,h,S[t+3],10,2399980690),h=i(h,s,d,g,S[t+10],15,4293915773),g=i(g,h,s,d,S[t+1],21,2240044497),d=i(d,g,h,s,S[t+8],6,1873313359),s=i(s,d,g,h,S[t+15],10,4264355552),h=i(h,s,d,g,S[t+6],15,2734768916),g=i(g,h,s,d,S[t+13],21,1309151649),d=i(d,g,h,s,S[t+4],6,4149444226),s=i(s,d,g,h,S[t+11],10,3174756917),h=i(h,s,d,g,S[t+2],15,718787259),g=i(g,h,s,d,S[t+9],21,3951481745),d=e(d,n),g=e(g,a),h=e(h,l),s=e(s,C);return(f(d)+f(g)+f(h)+f(s)).toLowerCase()})),t._RF.push({},"7c1d4JaLQlPSIlbNi2KkZsY","Md5",void 0);let n=function(r,t){return r<<t|r>>>32-t},e=function(r,t){let n,e,o,u,c;return o=2147483648&r,u=2147483648&t,n=1073741824&r,e=1073741824&t,c=(1073741823&r)+(1073741823&t),n&e?2147483648^c^o^u:n|e?1073741824&c?3221225472^c^o^u:1073741824^c^o^u:c^o^u},o=function(r,t,o,u,c,i,f){return r=e(r,e(e(function(r,t,n){return r&t|~r&n}(t,o,u),c),f)),e(n(r,i),t)},u=function(r,t,o,u,c,i,f){return r=e(r,e(e(function(r,t,n){return r&n|t&~n}(t,o,u),c),f)),e(n(r,i),t)},c=function(r,t,o,u,c,i,f){return r=e(r,e(e(function(r,t,n){return r^t^n}(t,o,u),c),f)),e(n(r,i),t)},i=function(r,t,o,u,c,i,f){return r=e(r,e(e(function(r,t,n){return t^(r|~n)}(t,o,u),c),f)),e(n(r,i),t)},f=function(r){let t,n,e="",o="";for(n=0;n<=3;n++)t=r>>>8*n&255,o="0"+t.toString(16),e+=o.substr(o.length-2,2);return e};t._RF.pop()}}}));

System.register("chunks:///_virtual/Memmory.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cec0ePeIF5PPbaYySKA9fsW","Memmory",void 0);e("default",class{constructor(){this.isCanSendMessage=!1,this.hallbanner="",this.gameClient=null,this.room_id="",this.screen_w=0,this.screen_h=0,this.hotUpdate_map={},this.need_hotUpdate_map={}}clearRoomData(){this.room_id="",this.gameClient=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/MiniGamePlatformImpl.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5609fKfMzBOVInFpW645PYP","MiniGamePlatformImpl",void 0);class a{isFeatureSupported(e){}login(e){}pay(e){}share(e){}exitApp(){}closeSplash(){}copyStr(e){}}e("MiniGamePlatformImpl",a),a.PLATFORM_NAME="WechatMiniGamePlatform",t._RF.pop()}}}));

System.register("chunks:///_virtual/NativePlatformImpl.ts",["cc"],(function(t){var e,a,l;return{setters:[function(t){e=t.cclegacy,a=t.sys,l=t.native}],execute:function(){e._RF.push({},"4f9a6VCBmlF5ZiZIPuirRGO","NativePlatformImpl",void 0);class i{constructor(){this.callbackMap=new Map,window.__nativePlatformCallback=(t,e)=>{console.log(`Received callback from ${i.PLATFORM_NAME}:`,t,e);const a=this.callbackMap.get(t);a&&(a(e),this.callbackMap.delete(t))}}isFeatureSupported(t){return!0}login(t){return this.callNativeMethod("login",null)}pay(t){return this.callNativeMethod("pay",JSON.stringify(t))}share(t){return this.callNativeMethod("share",JSON.stringify(t))}exitApp(){this.callNativeMethod("exitApp",void 0)}closeSplash(){this.callNativeMethod("closeSplash",void 0)}copyStr(t){return this.callNativeMethod("copyStr",t)}networkAvailable(){return this.callNativeMethod("networkAvailable",null)}netCheck(){return this.callNativeMethod("netCheck",null)}sendMessage(t){return this.callNativeMethod("sendMessage",JSON.stringify(t))}setOrientation(t){return this.callNativeMethod("orientation",JSON.stringify(t))}vibrator(){this.callNativeMethod("vibrator",null)}getDeviceId(){return this.callNativeMethod("getDeviceId",null)}getPackageName(){return this.callNativeMethod("getPackageName",null)}networkChangeReceiver(){return this.callNativeMethod("onNetworkStateChange",null)}callNativeMethod(t,e){return new Promise(((i,r)=>{const o="cb_"+t+"_"+Date.now()+"_"+Math.random().toString(36).substr(2);this.callbackMap.set(o,(e=>{try{const a=JSON.parse(e);"SUCCESS"===a.code?i(a):r(new Error(a.message||`Platform ${t} failed`))}catch(t){r(new Error(`Failed to parse platform response: ${e}`))}}));try{a.isNative&&a.os===a.OS.ANDROID?l.reflection.callStaticMethod("com/cocos/sdkbridge/PlatformBridge",t,"(Ljava/lang/String;Ljava/lang/String;)V",o,e||""):a.isNative&&a.os===a.OS.IOS||r(new Error("Native platform not detected"))}catch(t){this.callbackMap.delete(o),r(t)}}))}}t("NativePlatformImpl",i),i.PLATFORM_NAME="NativePlatform",e._RF.pop()}}}));

System.register("chunks:///_virtual/NetPackage.ts",["cc","./Core.ts"],(function(e){var s,t;return{setters:[function(e){s=e.cclegacy},function(e){t=e.default}],execute:function(){s._RF.push({},"91c63+8LVlInanirGhL5YHM","NetPackage",void 0);e("default",class{static encodeBuffer(e,s,a){const[n,c]=e.split("."),r=t.pb[n][c].encode(t.pb[n][c].create(s||{})).finish(),o=t.pb.Base.BaseMsg.create({MsgName:e,MsgBody:r,TraceInfo:a||null}),i=t.pb.Base.BaseMsg.encode(o).finish(),u=i.length,f=new Uint8Array(u+2);return f[0]=u>>8&255,f[1]=255&u,f.set(i,2),f.buffer}static decodeDataBuffer(e){const s=new Uint8Array(e),a=s[0]<<8|s[1],n=s.subarray(2,2+a),c=t.pb.Base.BaseMsg.decode(n);let r=null;if(c.MsgName&&c.MsgBody){const[e,s]=c.MsgName.split(".");r=t.pb[e][s].decode(c.MsgBody)}return{msgName:c.MsgName,msgBody:r,traceInfo:c.TraceInfo}}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/Network.ts",["cc","./Config.ts","./Core.ts","./NetPackage.ts","./Socket.ts"],(function(e){var t,s,n,o,i,c;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Config},function(e){n=e.default},function(e){o=e.default},function(e){i=e.WebSocketState,c=e.Socket}],execute:function(){t._RF.push({},"1215cwVasZBOqIAlzw+4hZ6","Network",void 0);let l=e("WSErrorCode",function(e){return e[e.CONNECTION_NOT_ESTABLISHED=0]="CONNECTION_NOT_ESTABLISHED",e[e.TIMEOUT=1]="TIMEOUT",e[e.REPEATED=2]="REPEATED",e}({}));e("default",class{constructor(){this._wsGame=null,this._socketMap=[],this._pendingRequests=[],this._timer=null,this._server_address=null}get isGameConnected(){return this._wsGame&&this._wsGame.state===i.OPEN}disconnect(e,t){this._wsGame?(this._wsGame.close(e,t),this.stopNetworkCheck(),this._socketMap.length=0,this._wsGame=null,n.logger.log("## 断开连接 原因:"+t)):n.logger.log("## 主动断开连接失败 当前无Socket实例!")}connectServer(e=this._server_address,t){this._wsGame&&this.disconnect(1e3,"Disconnect before each connection."),this._server_address=e,n.logger.log("## 连接"+e);let s=new c({server_address:e,succ:()=>{n.logger.log("## 连接成功"),this.stopNetworkCheck(),n.event.on(n.eventType.onSocketColse,this.onSocketClose,this),n.event.on(n.eventType.onSocketMsg,this.onMessage,this),n.event.on(n.eventType.onConnected,this.onConnected,this),n.heartbeat.start((()=>{n.logger.warn("心跳失败"),this.disconnect(4e3,"Failed heartbeat")})),this._timer=setInterval(this.checkSocketTimeOut.bind(this),1e3),null==t||t(!0)},fail:()=>{n.utils.removeWaiting(),null==t||t(!1)}});this._wsGame=s}onConnected(){for(;this._pendingRequests.length>0;){const e=this._pendingRequests.shift();this.doSend(e,!0)}}onSocketClose(e){1e3!==e&&(this.stopNetworkCheck(),this._socketMap.length=0,this._wsGame=null)}stopNetworkCheck(){n.heartbeat.stop(),this._timer&&(clearTimeout(this._timer),this._timer=null)}onMessage(e){if(!this.isGameConnected)return;s.debug&&!s.exclude_msgId.includes(e.msgName)&&(n.logger.logRecieve(`receive msg: ${e.msgName}`),n.logger.log(JSON.parse(`${JSON.stringify(e.msgBody)}`))),n.event.emit(e.msgName,e.msgBody);const t=Date.now();let o=!1;for(let s=0;s<this._socketMap.length;s++){let i=this._socketMap[s],c=i.response;if(c){"string"==typeof c&&(c=[c]);for(let l=0;l<c.length;l++)if(c[l]===e.msgName){o=!0;let r=t-i.sendTime;n.event.emit(n.eventType.ping,r),c.splice(l,1),0===c.length&&this._socketMap.splice(s,1),null==i.succ||i.succ(e.msgBody,e.msgName)}if(o)break}}}send(e,t,s,o,i,c=!1,r=!0){const a={request:e,param:s,response:t,succ:o,fail:i,sendTime:Date.now(),canRepeate:c,pendingRequest:r};if(this.isGameConnected&&(n.memmory.isCanSendMessage||["PreLobby.ReqLogin","PreLobby.ReqCreateRole","PreLobby.ReqGetRoleBaseData","Base.ReqHeartbeat"].includes(e)))return this.hasMessage(e)?c?(this.doSend(a),!0):(console.log("请勿重复请求:",a.request),!1):(this.doSend(a),!0);if(n.utils.showToast("网路未连接"),!r){if(i){let e;e=this.isGameConnected?l.REPEATED:l.CONNECTION_NOT_ESTABLISHED,i({code:e})}return!1}a.response&&this._socketMap.push(a),this._pendingRequests.push(a),console.log("连接尚未建立 放入请求队列:",a.request)}doSend(e,t){e.response&&!t&&this._socketMap.push(e);let i=o.encodeBuffer(e.request,e.param);this._wsGame.send(i),s.exclude_msgId.includes(e.request)||(n.logger.logSend(`send msg: ${e.request}`),n.logger.log(e.param))}hasMessage(e){return this._socketMap.some((t=>t.request===e))}cancelRequest(e){for(let t=0,s=this._socketMap.length;t<s;t++)if(this._socketMap[t].request===e){this._socketMap.splice(t,1);break}for(let t=0,s=this._pendingRequests.length;t<s;t++)if(this._pendingRequests[t].request===e){this._pendingRequests.splice(t,1);break}}cancelAllRequest(){this._socketMap.length=0}checkSocketTimeOut(){const e=Date.now();let t,o=[],i=[];for(let c=0,l=this._socketMap.length;c<l;c++){t=this._socketMap[c];let l=e-t.sendTime;n.event.emit(n.eventType.ping,l),l>s.timeout_socket&&(o.push(c),t.fail&&i.push(t.fail))}for(let e=o.length-1;e>=0;e--)this._socketMap.splice(o[e],1);o.length>0&&(n.utils.showToast(`请求超时[${s.timeout_socket/1e3}s]`),o=null);for(let e=0,t=i.length;e<t;e++)i[e]({code:l.TIMEOUT})}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/NumberScroller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(e){var t,i,r,n,l,a,c,o,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Node,l=e._decorator,a=e.Component,c=e.Label,o=e.instantiate,u=e.Layout},function(e){s=e.default}],execute:function(){var h,g,b,m,d,f,N;r._RF.push({},"10f17FRV15MXIsrteNi7dA9","NumberScroller",void 0);const{ccclass:p,property:y}=l;e("NumberScroller",(h=p(),g=y(n),b=y(n),h((f=t((d=class extends a{constructor(...e){super(...e),i(this,"digitPrefab",f,this),i(this,"container",N,this),this.targetNumber="0.00"}setNumber(e){e.newNumber=e.newNumber+"",this.targetNumber=e.newNumber,this.initializeDigits(e.newNumber.length);for(let e=0;e<this.container.children.length;e++){this.container.children[e].getComponent(c).string=this.targetNumber[e]}}startScrolling(e){e.newNumber=e.newNumber+"",this.targetNumber!==e.newNumber?(e.maxLength??(e.maxLength=e.newNumber.length),e.delay??(e.delay=.01),e.defaultScroller??(e.defaultScroller=3),this.initializeDigits(e.maxLength),this.targetNumber=e.newNumber.padStart(e.maxLength,"0"),this.scrollDigits(e.delay,e.defaultScroller,e.callback)):null==e.callback||e.callback()}initializeDigits(e=11){for(let t=0;t<e;t++){let e=this.container.children[t];e||(e=o(this.digitPrefab)),e.parent=this.container,e.active=!0}for(let t=e;t<this.container.children.length;t++)this.container.children[t].active=!1;this.container.getComponent(u).updateLayout()}scrollDigits(e,t,i){const r=this.container.children;for(let n=0;n<r.length;n++){if(!this.container.children[n].active){n===r.length-1&&(null==i||i());continue}let l=r[n].getComponent(c);if("."===this.targetNumber[n]){l.string=".",n===r.length-1&&(null==i||i());continue}const a=this.targetNumber[n]||"0";s.utils.textEffect({key:this.node.uuid+n,strLabel:l,beginNum:0,endNum:Number(a),delay:e,defaultScroller:t??n,callback:()=>{n===r.length-1&&(null==i||i())}})}}}).prototype,"digitPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(d.prototype,"container",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/NumberSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,n,r,o,h,a,l,g,c,u,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,r=t._decorator,o=t.Component,h=t.UITransform,a=t.Mask,l=t.instantiate,g=t.Label,c=t.Tween,u=t.tween,d=t.v3}],execute:function(){var b,m,p,N,f,C,P;s._RF.push({},"423a89ugX1BuZt+W3Fi2aXY","NumberSlider",void 0);const{ccclass:_,property:D}=r;t("NumberSlider",(b=_("NumberScroller"),m=D(n),p=D(n),b((C=i((f=class extends o{constructor(...t){super(...t),e(this,"digitPrefab",C,this),e(this,"container",P,this),this.targetNumber="000000000",this.lastTargetNumber="",this.scrolling=!1,this.isInit=!1,this._Width=void 0,this._height=void 0}start(){this.initializeDigits()}initializeDigits(){this.isInit=!0,this._Width=this.digitPrefab.getComponent(h).width,this._height=this.digitPrefab.getComponent(h).height,this.node.addComponent(a)}createContainer(){const t=this.targetNumber.length;this.node.removeAllChildren();const i=t*this.container.getComponent(h).width;for(let e=0;e<t;e++){let t=l(this.container);this.node.addChild(t);let s=this.container.getComponent(h);const n=e*s.width-i/2+s.width/2;t.setPosition(n,0,0);for(let i=-1;i<=9;i++){const e=l(this.digitPrefab);e.parent=t;e.getComponent(g).string=-1==i?".":i.toString(),e.setPosition(0,-(i+1)*this._height,0)}}this.node.getComponent(h).width=i}startScrolling(t,i=!0){if(this.targetNumber=t.toString(),this.isInit||this.initializeDigits(),!this.scrolling){this.scrolling=!0,this.createContainer(),i&&this.lastTargetNumber&&this.setContainerPosition(this.lastTargetNumber);for(let t=0;t<this.node.children.length;t++){const i=this.node.children[t];this.scrollDigits(i,t)}}}scrollDigits(t,i){let e=Number(this.targetNumber[i]);isNaN(e)?e=0:e+=1,c.stopAllByTarget(t),u(t).to(.5,{position:d(t.position.x,e*this._height)},{easing:"quadInOut"}).call((()=>{i===this.targetNumber.length-1&&(this.scrolling=!1,this.lastTargetNumber=this.targetNumber)})).start()}setDigits(t){this.targetNumber=t.toString(),this.lastTargetNumber=this.targetNumber,this.isInit||this.initializeDigits(),this.createContainer(),this.setContainerPosition(this.targetNumber)}setContainerPosition(t){const i=this.node.children;for(let e=0;e<i.length;e++){let s=Number(t[e]);isNaN(s)?s=0:s+=1;let n=i[e];n.setPosition(d(n.position.x,s*this._height))}}}).prototype,"digitPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(f.prototype,"container",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=f))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/PageIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,o=e._decorator,a=e.PageViewIndicator,s=e.instantiate}],execute:function(){var c,u,l,p;n._RF.push({},"48ef9r1Fk5OfqgqoRCYHbNa","PageIndicator",void 0);const{ccclass:g,property:d}=o;e("PageIndicator",(c=d({type:r}),g((p=t((l=class extends a{constructor(...e){super(...e),i(this,"sign",p,this)}onEnable(){this._changedState()}_createIndicator(){const e=s(this.sign);return e.parent=this.node,e.active=!0,e.setPosition(0,0,0),e._uiProps.uiTransformComp.setContentSize(this._cellSize),e}_changedState(){const e=this._indicators;if(0===e.length||!this._pageView)return;const t=this._pageView.curPageIdx;if(!(t>=e.length)){for(let t=0;t<e.length;++t){const i=e[t];i._uiProps.uiComp&&(i.getChildByName("bar").active=!1)}e[t]._uiProps.uiComp&&(e[t].getChildByName("bar").active=!0)}}}).prototype,"sign",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=l))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformApi.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ad16eUVhchGs4Hb/NfrP97M","PlatformApi",void 0);e("PlatformFeature",function(e){return e.LOGIN="login",e.PAY="pay",e.SHARE="share",e.EXITAPP="exitApp",e.CLOSESPLASH="closeSplash",e.COPYSTR="copyStr",e.NETWORKAVAILABLE="networkAvailable",e.NETCHECK="netCheck",e.SENDMESSAGE="sendMessage",e.ORIENTATION="orientation",e.VIBRATOR="vibrator",e.GETDEVICEID="getDeviceId",e.GETPACKAGENAME="getPackageName",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformSdkManager.ts",["cc","./ChannelConfig.ts","./Define.ts","./MiniGamePlatformImpl.ts","./NativePlatformImpl.ts","./WebPlatformImpl.ts"],(function(t){var i,n,r,e,a,o;return{setters:[function(t){i=t.cclegacy},function(t){n=t.ChannelConfig},function(t){r=t.Platform},function(t){e=t.MiniGamePlatformImpl},function(t){a=t.NativePlatformImpl},function(t){o=t.WebPlatformImpl}],execute:function(){i._RF.push({},"e5560AxfwdGl7HlOipHGzqL","PlatformSdkManager",void 0);class l{constructor(){this.currentPlatform=null}static getInstance(){return l._instance??(l._instance=new l)}initialize(){if(this.currentPlatform)return;switch(n.platform){case r.Android:case r.IOS:this.initNativePlatform();break;case r.Web:this.initWebPlatform();break;case r.Mini:this.initMiniGame()}}getPlatform(){if(!this.currentPlatform)throw new Error("Platform SDK not initialized. Call initialize() first.");return this.currentPlatform}initMiniGame(){console.log("[PlatformSDK] 检测到微信小游戏平台环境"),this.currentPlatform=new e}initNativePlatform(){console.log("[PlatformSDK] 检测到原生平台环境"),this.currentPlatform=new a}initWebPlatform(){console.log("[PlatformSDK] 检测到Web平台环境"),this.currentPlatform=new o}}t("PlatformSdkManager",l),l._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Pools.ts",["cc","./Core.ts"],(function(t){var o,s,e,i,l,r;return{setters:[function(t){o=t.cclegacy,s=t.director,e=t.Director,i=t.NodePool,l=t.instantiate},function(t){r=t.default}],execute:function(){o._RF.push({},"2a1f5+7qxtM/6Kp3Qmq1Aw3","Pools",void 0);class a{constructor(){s.on(e.EVENT_BEFORE_SCENE_LAUNCH,a.clearPool.bind(this))}static isExistPool(t){return this.pools.has(t)}static createPool(t,o,s=1){if(!this.pools.has(t)){let e=new i;this.nodes.set(t,l(o)),this.pools.set(t,e);for(let e=0;e<s;e++)this.pools.get(t).put(l(o))}}static clearPool(){this.pools.forEach((t=>{t.clear()})),this.nodes.clear(),this.pools.clear()}static clearPoolByName(t){this.pools.has(t)&&(this.pools.get(t).clear(),this.pools.delete(t))}static get(t){if(this.pools.has(t)){let o=this.pools.get(t);if(o&&o.size()>0){return o.get()}return l(this.nodes.get(t))}return null}static put(t,o){if(this.pools.has(t)){let s=this.pools.get(t);o instanceof Array?o.forEach((t=>{s.put(t)})):s.put(o)}else r.logger.error("不存在池子："+t)}}t("Pools",a),a.nodes=new Map,a.pools=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenFit.ts","./Core.ts","./BaseClass.ts"],(function(t){var e,o,i,n,s,a,l,c,p,r,h,u,d,m,b,g,f,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t.Enum,a=t.CCBoolean,l=t._decorator,c=t.UIOpacity,p=t.Tween,r=t.Button,h=t.EventHandler,u=t.tween,d=t.BlockInputEvents,m=t.v3,b=t.UITransform},function(t){g=t.default},function(t){f=t.default},function(t){C=t.default}],execute:function(){var S,w,y,k,$,v,B,I,A,H,_,P;i._RF.push({},"86a3fLBiflHBJPVDPO8QUID","PopupBase",void 0);const{ccclass:D,property:L}=l;let R=t("PopupState",function(t){return t[t.Showing=0]="Showing",t[t.Showed=1]="Showed",t[t.Hideing=2]="Hideing",t[t.Hided=3]="Hided",t}({})),z=t("PopupOpenAni",function(t){return t[t.None=0]="None",t[t.Center=1]="Center",t[t.Left2Right=2]="Left2Right",t[t.Right2Left=3]="Right2Left",t[t.FadeIn=4]="FadeIn",t}({}));t("default",(S=L({type:n,tooltip:"背景遮罩"}),w=L({type:n,tooltip:"弹窗主体"}),y=L({type:s(z),tooltip:"弹窗动画"}),k=L({type:a,tooltip:"是否需要关闭动画"}),$=L({tooltip:"点击背景遮罩关闭弹窗"}),D((I=e((B=class extends C{constructor(...t){super(...t),o(this,"$blockInput",I,this),o(this,"$content",A,this),o(this,"$mainAni",H,this),o(this,"$closeAni",_,this),o(this,"$bgclose",P,this),this.animDuration=.3,this.blocker=null,this.options=void 0,this.popupState=R.Hided,this.finishCallback=null}open(t,e=this.animDuration){return new Promise((o=>{this.popupState=R.Showing,this.options=t;const i=this.$blockInput,n=this.$content;this.node.active=!0;let s=i.getComponent(c);s||(s=i.addComponent(c)),p.stopAllByTarget(s);let a=n.getComponent(c);a||(a=n.addComponent(c)),p.stopAllByTarget(a),a.opacity=255;let l=i.getComponent(r);if(l||(l=i.addComponent(r)),i.getComponent(g)||i.addComponent(g),s.opacity=0,this.$bgclose&&!l.clickEvents.some((t=>"_onBtClose"===t.handler))){let t=new h;t.target=this.node,t.component=this._getComponentName(this),t.handler="_onBtClose",i.getComponent(r).clickEvents.push(t)}const m=191.25;this.$mainAni===z.None?s.opacity=m:u(s).delay(.2*e).to(.8*e,{opacity:m}).start(),n.getComponent(d)||n.addComponent(d),this.init(this.options),this.updateDisplay(this.options),this.mainAni(e,o)}))}mainAni(t,e){let o=this.$content;switch(this.$mainAni){case z.None:o.setScale(m(1,1,1)),this.popupState=R.Showed,this.toShow(),e();break;case z.FadeIn:u(o).to(0,{scale:m(1,1,1)},{easing:"backOut"}).start();let i=o.getComponent(c);i.opacity=0,u(i).to(t,{opacity:255},{easing:"backOut"}).call((()=>{this.popupState=R.Showed,this.toShow(),e()})).start();break;case z.Center:o.setScale(m(.8,.8,1)),u(o).to(t,{scale:m(1,1,1)},{easing:"backOut"}).call((()=>{this.popupState=R.Showed,this.toShow(),e()})).start();break;case z.Left2Right:o.setScale(m(1,1,1)),o.position=m(-f.memmory.screen_w),u(o).to(t,{position:m(0,0,0)}).call((()=>{this.popupState=R.Showed,this.toShow(),e()})).start();break;case z.Right2Left:o.setScale(m(1,1,1)),o.position=m(f.memmory.screen_w),u(o).to(t,{position:m(0,0,0)}).call((()=>{this.popupState=R.Showed,this.toShow(),e()})).start()}}close(t=!1,e=this.animDuration){return new Promise((o=>{const i=this.node;i&&i.isValid||o(),this.popupState=R.Hideing,this.$blockInput&&u(this.$blockInput.getComponent(c)).delay(.2*e).to(.8*e,{opacity:0}).start();let s=()=>{var e;this.blocker&&(this.blocker.active=!1),this.popupState=R.Hided,this.onHide&&this.onHide(t),o(),null==(e=this.finishCallback)||e.call(this,t)};if(this.$content&&this.$closeAni&&e>0){let t=this.blocker;t||(t=new n("blocker"),t.addComponent(d),t.addComponent(b),t.getComponent(b).setContentSize(i.getComponent(b).contentSize),t.setParent(i)),t.active=!0,this.blocker=t;let o=this.$content;switch(this.$mainAni){case z.None:case z.FadeIn:case z.Center:u(this.$content.getComponent(c)).to(e,{opacity:0}).start(),u(this.$content).to(e,{scale:m(.8,.8,1)},{easing:"backIn"}).call((()=>{s()})).start();break;case z.Right2Left:u(o).to(e,{position:m(f.memmory.screen_w)}).call((()=>{s()})).start();break;case z.Left2Right:u(o).to(e,{position:m(-f.memmory.screen_w)}).call((()=>{s()})).start()}}else s()}))}toShow(){this.scheduleOnce((()=>{this.onShow(this.options)}))}init(t){}updateDisplay(t){}onShow(t){}onHide(t){}setFinishCallback(t){this.finishCallback=t}_onBtClose(){this.close()}}).prototype,"$blockInput",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(B.prototype,"$content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(B.prototype,"$mainAni",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.Center}}),_=e(B.prototype,"$closeAni",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=e(B.prototype,"$bgclose",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=B))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/PopupConfig.ts",["cc","./Define.ts"],(function(o){var e,a;return{setters:[function(o){e=o.cclegacy},function(o){a=o.Bundle_name}],execute:function(){e._RF.push({},"36061oowWVDLpu7P01TMZ/x","PopupConfig",void 0);const l=o("PopupName",{Toast:"Toast",Waiting:"Waiting",Dialog:"Dialog",MahjongResult:"MahjongResult",MahjongResultAll:"MahjongResultAll",MahjongPlayerInfo:"MahjongPlayerInfo",MahjongChat:"MahjongChat",MahjongCoinFlow:"MahjongCoinFlow",MahjongSetting:"MahjongSetting",MahjongRecord:"MahjongRecord",MahjongDissolve:"MahjongDissolve",Hall:"Hall",Marquees:"Marquees",PlayerInfo:"PlayerInfo",BindPhone:"BindPhone",Setting:"Setting",Notice:"Notice",GameRule:"GameRule",Shop:"Shop",Email:"Email",Rename:"Rename",ChangeAvatar:"ChangeAvatar",MessageBox:"MessageBox",CoinLobby:"CoinLobby",Debug:"Debug",DebugMessageBox:"DebugMessageBox",Agreement:"Agreement",JoinKeybord:"JoinKeybord",RoomMain:"RoomMain",GuildAskRecord:"GuildAskRecord",GuildAskRecordOwner:"GuildAskRecordOwner",GuildConvertRoom:"GuildConvertRoom",GuildMain:"GuildMain",GuildMessageBoxLarge:"GuildMessageBoxLarge",GuildMessageBoxSmall:"GuildMessageBoxSmall",GuildNotice:"GuildNotice",GuildNoticeEdit:"GuildNoticeEdit",PlayRecord:"PlayRecord",PlayRecordDetail:"PlayRecordDetail",MyGuild:"MyGuild",CreateRoom:"CreateRoom",GuildRename:"GuildRename",GuildRoomRule:"GuildRoomRule",DuobaoMain:"DuobaoMain",DuobaoCreate:"DuobaoCreate",DuobaoCreateMessageBox:"DuobaoCreateMessageBox",DuobaoRecord:"DuobaoRecord",DuobaoRule:"DuobaoRule",DuobaoCancelMessageBox:"DuobaoCancelMessageBox",DuobaoResult:"DuobaoResult",DuobaoJoinMessageBox:"DuobaoJoinMessageBox"});class u{}o("default",u),u.config={[l.Toast]:{popupPath:"prefab/component/Toast",bundle:a.Common},[l.Waiting]:{popupPath:"prefab/component/Waiting",bundle:a.Common},[l.Dialog]:{popupPath:"prefab/component/Dialog",bundle:a.Common},[l.MahjongResult]:{popupPath:"prefab/MahjongResult",bundle:a.Mahjong},[l.MahjongResultAll]:{popupPath:"prefab/MahjongResultAll",bundle:a.Mahjong},[l.MahjongPlayerInfo]:{popupPath:"prefab/MahjongPlayerInfo",bundle:a.Mahjong},[l.MahjongChat]:{popupPath:"prefab/MahjongChat",bundle:a.Mahjong},[l.MahjongCoinFlow]:{popupPath:"prefab/MahjongCoinFlow",bundle:a.Mahjong},[l.MahjongSetting]:{popupPath:"prefab/MahjongSetting",bundle:a.Mahjong},[l.MahjongRecord]:{popupPath:"prefab/MahjongRecord",bundle:a.Mahjong},[l.MahjongDissolve]:{popupPath:"prefab/MahjongDissolve",bundle:a.Mahjong},[l.Marquees]:{popupPath:"prefab/Marquees",bundle:a.Hall},[l.PlayerInfo]:{popupPath:"prefab/PlayerInfo",bundle:a.Hall},[l.BindPhone]:{popupPath:"prefab/BindPhone",bundle:a.Hall},[l.Setting]:{popupPath:"prefab/Setting",bundle:a.Hall},[l.Notice]:{popupPath:"prefab/Notice",bundle:a.Hall},[l.GameRule]:{popupPath:"prefab/GameRule",bundle:a.Hall},[l.Shop]:{popupPath:"prefab/Shop",bundle:a.Hall},[l.Email]:{popupPath:"prefab/Email",bundle:a.Hall},[l.Rename]:{popupPath:"prefab/Rename",bundle:a.Hall},[l.ChangeAvatar]:{popupPath:"prefab/ChangeAvatar",bundle:a.Hall},[l.MessageBox]:{popupPath:"prefab/MessageBox",bundle:a.Hall},[l.CoinLobby]:{popupPath:"prefab/CoinLobby",bundle:a.Hall},[l.Debug]:{popupPath:"prefab/debug/Debug",bundle:a.Hall},[l.DebugMessageBox]:{popupPath:"prefab/debug/DebugMessageBox",bundle:a.Hall},[l.JoinKeybord]:{popupPath:"prefab/room/JoinKeybord",bundle:a.Hall},[l.RoomMain]:{popupPath:"prefab/room/RoomMain",bundle:a.Hall},[l.GuildAskRecord]:{popupPath:"prefab/room/guild/GuildAskRecord",bundle:a.Hall},[l.GuildAskRecordOwner]:{popupPath:"prefab/room/guild/GuildAskRecordOwner",bundle:a.Hall},[l.GuildConvertRoom]:{popupPath:"prefab/room/guild/GuildConvertRoom",bundle:a.Hall},[l.GuildMain]:{popupPath:"prefab/room/guild/GuildMain",bundle:a.Hall},[l.GuildMessageBoxLarge]:{popupPath:"prefab/room/guild/GuildMessageBoxLarge",bundle:a.Hall},[l.GuildMessageBoxSmall]:{popupPath:"prefab/room/guild/GuildMessageBoxSmall",bundle:a.Hall},[l.GuildNotice]:{popupPath:"prefab/room/guild/GuildNotice",bundle:a.Hall},[l.GuildNoticeEdit]:{popupPath:"prefab/room/guild/GuildNoticeEdit",bundle:a.Hall},[l.PlayRecord]:{popupPath:"prefab/room/PlayRecord",bundle:a.Hall},[l.PlayRecordDetail]:{popupPath:"prefab/room/PlayRecordDetail",bundle:a.Hall},[l.MyGuild]:{popupPath:"prefab/room/guild/MyGuild",bundle:a.Hall},[l.CreateRoom]:{popupPath:"prefab/room/CreateRoom",bundle:a.Hall},[l.GuildRename]:{popupPath:"prefab/room/guild/GuildRename",bundle:a.Hall},[l.GuildRoomRule]:{popupPath:"prefab/room/guild/GuildRoomRule",bundle:a.Hall},[l.DuobaoMain]:{popupPath:"prefab/duobao/DuobaoMain",bundle:a.Hall},[l.DuobaoCreate]:{popupPath:"prefab/duobao/DuobaoCreate",bundle:a.Hall},[l.DuobaoCreateMessageBox]:{popupPath:"prefab/duobao/DuobaoCreateMessageBox",bundle:a.Hall},[l.DuobaoRecord]:{popupPath:"prefab/duobao/DuobaoRecord",bundle:a.Hall},[l.DuobaoRule]:{popupPath:"prefab/duobao/DuobaoRule",bundle:a.Hall},[l.DuobaoCancelMessageBox]:{popupPath:"prefab/duobao/DuobaoCancelMessageBox",bundle:a.Hall},[l.DuobaoResult]:{popupPath:"prefab/duobao/DuobaoResult",bundle:a.Hall},[l.DuobaoJoinMessageBox]:{popupPath:"prefab/duobao/DuobaoJoinMessageBox",bundle:a.Hall},[l.Agreement]:{popupPath:"prefab/Agreement",bundle:a.Hall}},e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["cc","./Core.ts","./PopupBase.ts","./PopupConfig.ts"],(function(e){var t,s,i,n,r,o,u,p,a,l;return{setters:[function(e){t=e.isValid,s=e.instantiate,i=e.find,n=e.assetManager,r=e.cclegacy,o=e.resources},function(e){u=e.default},function(e){p=e.default,a=e.PopupState},function(e){l=e.default}],execute:function(){r._RF.push({},"99f21+cszhEb72f95XrJtiU","PopupManager",void 0);var h=function(e){return e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent",e}(h||{}),c=function(e){return e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting",e}(c||{});e("default",class{constructor(){this._prefabCache=new Map,this._nodeCache=new Map,this._current=void 0,this._popups=[],this._queue=[],this._closeQueue=[],this._suspended=[],this.locked=!1,this.interval=.05,this.loadStartCallback=void 0,this.loadFinishCallback=void 0}get prefabCache(){return this._prefabCache}get nodeCache(){return this._nodeCache}get current(){return this._current}get popups(){return this._popups}get queue(){return this._queue}get closeQueue(){return this._closeQueue}get suspended(){return this._suspended}get CacheMode(){return h}get ShowResult(){return c}open(e,n,r,o,a){return new Promise((async h=>{var d;r=this.parseParams(r);let g=l.config[e],_=g.popupPath;if(this.closeQueue.includes(_)){let e=this.closeQueue.indexOf(_);this.closeQueue.splice(e,1)}if(this.isShowPopup(e))return void u.logger.warn(`[PopupManager]弹窗已经显示:${_}`);if(this.locked){if(!r||!r.immediately)return this.push(_,n,r),void h(c.Waiting);this.locked=!1,await this.suspend()}let f=this.getNodeFromCache(_);if(!t(f)){var m,C;null==(m=this.loadStartCallback)||m.call(this);const i=await this.load(g);if(this.isShowPopup(e))return void u.logger.warn(`[PopupManager]弹窗已经显示:${_}`);if(null==(C=this.loadFinishCallback)||C.call(this),!i||!t(i))return u.logger.warn(`[PopupManager]弹窗加载失败${_}`),this._current=null,void h(c.Failed);f=s(i)}const P=f.getComponent(p);if(!P)return u.logger.warn(`[PopupManager]未找到弹窗组件${_}`),this._current=null,void h(c.Failed);if(this.closeQueue.includes(_)){let e=this.closeQueue.indexOf(_);return this.closeQueue.splice(e,1),this.recycle(_,f,r.mode),void h(c.Failed)}this._current={path:_,options:n,params:r},this._current.popup=P,this._current.node=f,f.setParent(o??(null==(d=i("Canvas"))?void 0:d.getChildByName("popups"))??i("Canvas")),f.setSiblingIndex(f.parent.children.length);P.setFinishCallback((async e=>{if(e)return;this.locked=this._suspended.length>0||this._queue.length>0,this.recycle(_,f,r.mode);let t=this._popups.findIndex((e=>e.path===_));-1!==t?(this._popups.splice(t,1),u.logger.log("[PopupManager]移除弹窗:"+_,"#1F00FF"),u.logger.log("[PopupManager]弹窗展示列表:"+this._popups.map((e=>e.path)),"#1F00FF")):u.logger.warn("[PopupManager]移除弹窗失败:"+_),this._current=this._popups[this._popups.length-1]??null,h(c.Done),await new Promise((e=>{setTimeout((()=>{e()}),1e3*this.interval)})),this.next()})),this._popups.push(this._current),u.logger.log("[PopupManager]打开弹窗:"+_,"#1F00FF"),u.logger.log("[PopupManager]弹窗展示列表:"+this._popups.map((e=>e.path)),"#1F00FF"),await P.open(n),null==a||a()}))}closeCurr(){this._current.popup&&this._current.popup.close()}close(e,t,s){let i=l.config[e].popupPath,n=this._popups.find((e=>e.path===i));n?n.popup.close(!1,s):this.closeQueue.includes(i)||t&&this.closeQueue.push(i)}isShowPopup(e){let t=l.config[e].popupPath,s=this._popups.find((e=>e.path===t));return s&&(s.popup.popupState===a.Showing||s.popup.popupState===a.Showed)?s.popup:null}getNodeFromCache(e){const i=this._nodeCache;if(i.has(e)){const s=i.get(e);if(t(s))return s;i.delete(e)}const n=this._prefabCache;if(n.has(e)){const i=n.get(e);if(t(i))return i.addRef(),s(i);n.delete(e)}return null}next(){if(this._current||0===this._suspended.length&&0===this._queue.length)return;let e;var s;if(e=this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,t(e.popup))return this._current=e,e.node.setParent((null==(s=i("Canvas"))?void 0:s.getChildByName("popups"))??i("Canvas")),void e.popup.open(e.options);this.open(e.path,e.options,e.params)}push(e,t,s){this._current||this.locked?(this._queue.push({path:e,options:t,params:s}),this._queue.sort(((e,t)=>e.params.priority-t.params.priority))):this.open(e,t,s)}async suspend(){if(!this._current)return;const e=this._current;this._suspended.push(e),await e.popup.close(!0),this._current=null}recycle(e,t,s){switch(s){case h.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case h.Normal:this._nodeCache.delete(e),t.destroy();break;case h.Frequent:t.removeFromParent(),this._nodeCache.set(e,t)}}load(e){return new Promise((async s=>{let i=e.popupPath;const r=this._prefabCache;if(r.has(i)){const e=r.get(i);if(t(e))return void s(e);r.delete(i)}let u=null;u="resources"===e.bundle?o:n.getBundle(e.bundle),u?u.load(i,((e,t)=>{e?s(null):(r.set(i,t),s(t))})):s(null)}))}release(e){const s=this._nodeCache;let i=s.get(e);i&&(s.delete(e),t(i)&&i.destroy(),i=void 0);const n=this._prefabCache;let r=n.get(e);r&&(r.refCount<=1&&n.delete(e),r.decRef(),r=void 0)}parseParams(e){return null==e?new d:"[object Object]"!==Object.prototype.toString.call(e)?(u.logger.warn(`[PopupManager]弹窗参数无效，使用默认参数:${e}`),new d):(null==e.mode&&(e.mode=h.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)}clear(){this.popups.length=0,this.queue.length=0,this.suspended.length=0,this.closeQueue.length=0,this.locked=!1}});class d{constructor(){this.mode=h.Frequent,this.priority=0,this.immediately=!1}}r._RF.pop()}}}));

System.register("chunks:///_virtual/prototypes.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ac977TWfNhNy5vdGCAE3V0L","prototypes",void 0),Date.prototype.fmt=function(t){var e=this,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t.indexOf("NaN")>-1?"":t},Date.prototype.addSecond=function(t){let e=this.getTime();return e+=1e3*t,new Date(e)},Number.prototype.add=function(t){return function(t,e){var n,r;const o=(null==(n=t.toString().split(".")[1])?void 0:n.length)||0,i=(null==(r=e.toString().split(".")[1])?void 0:r.length)||0,u=Math.pow(10,Math.max(o,i));return(t*u+e*u)/u}(this.valueOf(),t)},Number.prototype.sub=function(t){return function(t,e){var n,r;const o=(null==(n=t.toString().split(".")[1])?void 0:n.length)||0,i=(null==(r=e.toString().split(".")[1])?void 0:r.length)||0,u=Math.pow(10,Math.max(o,i));return(t*u-e*u)/u}(this.valueOf(),t)},Number.prototype.mul=function(t){return function(t,e){const n=t.toString(),r=e.toString(),o=(n.split(".")[1]||"").length,i=(r.split(".")[1]||"").length,u=o+i;return Number(n.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,u)}(this.valueOf(),t)},Number.prototype.div=function(t){return function(t,e){if(0===e)throw new Error("Division by zero is not allowed.");const n=t.toString(),r=e.toString(),o=(n.split(".")[1]||"").length,i=(r.split(".")[1]||"").length;return Number(n.replace(".",""))/Number(r.replace(".",""))*Math.pow(10,i-o)}(this.valueOf(),t)},t._RF.pop()}}}));

System.register("chunks:///_virtual/Rotate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,s,i,r,a,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.CCBoolean,i=t.CCInteger,r=t._decorator,a=t.Component,l=t.tween,p=t.Tween}],execute:function(){var u,c,d,h,R,f,y;n._RF.push({},"14b91znBCNFu4rcpyFRh8u9","Rotate",void 0);let T=t("ROTATETYPE",function(t){return t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t}({}));const{ccclass:b,property:g,menu:F}=r;t("default",(u=F("Custom/Rotate"),c=g({type:s,tooltip:"启动时加载"}),d=g({type:i,tooltip:"速度"}),b(h=u((f=e((R=class extends a{constructor(...t){super(...t),o(this,"load",f,this),o(this,"speed",y,this)}onEnable(){this.load&&this.startRotate()}onDisable(){this.stopRotate()}startRotate(t=this.speed,e=T.LEFT){this.stopRotate(),this.speed=t;const o=this.node.angle;let n;n=e===T.LEFT?o-360:o+360,l(this.node).to(this.speed,{angle:n}).set({angle:o}).union().repeatForever().start()}stopRotate(){this.node&&p.stopAllByTarget(this.node)}}).prototype,"load",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(R.prototype,"speed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),h=R))||h)||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneBase.ts",["cc","./Thirdparty.ts","./Core.ts","./ClickEffect.ts","./Define.ts","./BaseClass.ts","./PopupConfig.ts","./SceneNavigator.ts"],(function(e){var t,n,o,a,i,c,s,l,u,p,r;return{setters:[function(e){t=e.cclegacy,n=e.find,o=e._decorator},function(e){a=e.default,i=e.NativeEventId},function(e){c=e.default},function(e){s=e.default},function(e){l=e.Scene_name},function(e){u=e.default},function(e){p=e.PopupName},function(e){r=e.default}],execute:function(){var d;t._RF.push({},"286e7JLr91B0IFNaRbzoiRg","SceneBase",void 0);const{ccclass:v}=o;e("SceneBase",v(d=class extends u{constructor(...e){super(...e),this._popupQueue=[],this._starting=!1}onLoad(){this.addComponent(s),c.ui.clear(),c.event.on(c.eventType.onAppUpdate,this.onAppUpdate,this),c.event.on(c.eventType.onSocketColse,this.onSocketClose,this),c.event.on(c.eventType.onNativeBack,this.onNativeBack,this),c.memmory.room_id}onDestroy(){c.event.removeAllByTarget(this)}onAppUpdate(){c.event.emit(c.eventType.blockInput,!0)}onSocketClose(e){switch(e){case 1e3:break;case 4e3:console.log("心跳失败，重新连接"),c.event.emit(c.eventType.autoLogin);break;default:this.opneDialog(e)}}opneDialog(e){c.utils.showDialog({content:`连接断开[code:${e}],请重新登录`,confirmCb:()=>{c.event.emit(c.eventType.autoLogin)},btnStyle:0})}onNativeBack(){let e=!1,t=c.ui.current;if(null!=t&&t.node.isValid&&t.node.active)switch(e=!0,t.node.name){case p.Dialog:case p.Toast:case p.Waiting:break;default:t.popup.close()}if(!e)switch(r.curScene){case l.Loading:case l.Login:case l.Hall:c.utils.showDialog({content:"是否退出游戏?",confirmCb:()=>{a.callThirdparty(i.ExitApp)},btnStyle:3});break;default:let e=n("Canvas").getComponent("GameClient");null==e||null==e.onNativeBackHander||e.onNativeBackHander()}}})||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneNavigator.ts",["cc","./Define.ts"],(function(t){var e,s,c;return{setters:[function(t){e=t.director,s=t.cclegacy},function(t){c=t.Scene_name}],execute:function(){s._RF.push({},"a22a2p0a89L2LU5e8HfYDhP","SceneNavigator",void 0);class i{static get home(){return this._home}static get history(){return this._history}static get curScene(){return this._curScene}static set curScene(t){this._curScene=t}static get param(){return i._param}static set param(t){i._param=t}static setHome(t){this._home=t,this._history=[t],this._curScene=t}static goHome(t,s,i){this._param=null;const n=this._home||c.Hall;this._curScene!==n?(this._curScene=null,this._param=t||null,e.loadScene(n,(()=>{s&&(this._history.length=0),this._history.push(n),this._curScene=n,null==i||i()}))):null==i||i()}static go(t,s,c){this._param=null,this._curScene!==t?e.loadScene(t,(()=>{this._history.push(t),this._curScene=t,this._param=s||null,null==c||c()})):null==c||c()}static back(t,s){if(this._history.length<1)return;this._param=null;const c=this._history,i=c[c.length-2];e.loadScene(i,(()=>{c.pop(),this._curScene=i,this._param=t||null,null==s||s()}))}}t("default",i),i._home="",i._history=[],i._curScene="",i._param=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenFit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./Config.ts"],(function(e){var t,i,h,s,n,_,o,r,c,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){h=e.cclegacy,s=e.Enum,n=e._decorator,_=e.Component,o=e.UITransform,r=e.v3,c=e.Widget},function(e){d=e.default},function(e){g=e.Config}],execute:function(){var a,l,p,w,C,m;h._RF.push({},"9a45e9JinFDWZ1QgiUC9fC3","ScreenFit",void 0);let H=e("FitType",function(e){return e[e.FULL=0]="FULL",e[e.RATIO=1]="RATIO",e[e.WIDTH=2]="WIDTH",e[e.HEIGHT=3]="HEIGHT",e[e.ONLY_WIDTH=4]="ONLY_WIDTH",e[e.ONLY_HEIGHT=5]="ONLY_HEIGHT",e[e.SCALE_WIDTH=6]="SCALE_WIDTH",e[e.SCALE_HEIGHT=7]="SCALE_HEIGHT",e[e.SCALE_RATIO=8]="SCALE_RATIO",e}({}));const{ccclass:u,property:T,menu:I}=n;e("default",(a=u("ScreenFit"),l=I("Adapter/ScreenFit"),p=T({type:s(H)}),a(w=l((m=t((C=class extends _{constructor(...e){super(...e),i(this,"fit",m,this),this._width=0,this._height=0,this._screen_w=d.memmory.screen_w,this._screen_h=d.memmory.screen_h}onLoad(){let e=this.node.getComponent(o);this._width=e.width,this._height=e.height,this.resize()}onDestroy(){d.event.removeAllByTarget(this)}resize(){switch(this.fit){case H.HEIGHT:{let e=this._screen_h/g.design_height;this.node.getComponent(o).width=this._width*e,this.node.getComponent(o).height=this._height*e;break}case H.WIDTH:{let e=this._screen_w/g.design_width;this.node.getComponent(o).width=this._width*e,this.node.getComponent(o).height=this._height*e;break}case H.RATIO:if(this._screen_w/this._screen_h>g.design_width/g.design_height){let e=this._screen_w/g.design_width;this.node.getComponent(o).width=this._width*e,this.node.getComponent(o).height=this._height*e}else{let e=this._screen_h/g.design_height;this.node.getComponent(o).width=this._width*e,this.node.getComponent(o).height=this._height*e}break;case H.FULL:this.node.getComponent(o).width=this._screen_w,this.node.getComponent(o).height=this._screen_h;break;case H.ONLY_WIDTH:{let e=this._screen_w/g.design_width;this.node.getComponent(o).width=this._width*e;break}case H.ONLY_HEIGHT:{var e;let t=this._screen_h/g.design_height;this.node.getComponent(o).height=this._height*t,null==(e=this.node.getComponent(c))||e.updateAlignment();break}case H.SCALE_WIDTH:{let e=this._screen_w/g.design_width;this.node.scale=r(e,e,1);break}case H.SCALE_HEIGHT:{let e=this._screen_h/g.design_height;this.node.scale=r(e,e,1);break}case H.SCALE_RATIO:if(this._screen_w/this._screen_h>g.design_width/g.design_height){let e=this._screen_w/g.design_width;this.node.scale=r(e,e,1)}else{let e=this._screen_h/g.design_height;this.node.scale=r(e,e,1)}break}}}).prototype,"fit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.FULL}}),w=C))||w)||w));h._RF.pop()}}}));

System.register("chunks:///_virtual/Services.ts",["cc"],(function(s){var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"e0848yDJgNPgYU95Nmn6nA2","Services",void 0);s("default",class{constructor(){this._servicesClass=[],this.instances=[]}add(s){this._servicesClass.push(s)}init(){this.instances=[];for(const s in this._servicesClass){let e=this._servicesClass[s];e.init||(e=new this._servicesClass[s]),e.init(),this.instances.push(e)}}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Socket.ts",["cc","./Core.ts","./NetPackage.ts"],(function(e){var t,n,s;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default},function(e){s=e.default}],execute:function(){t._RF.push({},"03e19zWTGFAs4ze2FPZQS2S","Socket",void 0);e("WebSocketState",function(e){return e[e.UNKNOWN=-1]="UNKNOWN",e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e}({}));e("Socket",class{get state(){return this._ws.readyState}constructor(e){this._ws=null,this._timeoutId=void 0,this._handlerConnect=null,this._handlerConnect={succ:e.succ,fail:e.fail};let t=e.server_address;this._ws=new WebSocket(t),this._ws.onmessage=this.onMessage.bind(this),this._ws.onopen=this.onConnected.bind(this),this._ws.onerror=this.onError.bind(this),this._ws.onclose=this.onClosed.bind(this),this._ws.binaryType="arraybuffer",this._timeoutId=setTimeout(this.connectionTimeout.bind(this,!0),1e4)}connectionTimeout(){var e;this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),null==(e=this._handlerConnect)||e.fail(),this._handlerConnect=null}onConnected(){var e;this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),null==(e=this._handlerConnect)||e.succ(),this._handlerConnect=null,n.event.emit(n.eventType.onSocketOpen)}onMessage(e){let t=s.decodeDataBuffer(e.data);n.event.emit(n.eventType.onSocketMsg,t)}onError(){}onClosed(e){n.logger.log("## 连接已关闭 code:"+e.code),n.event.emit(n.eventType.onSocketColse,e.code)}send(e){this._ws.send(e)}close(e,t){this._ws&&this._ws.close(e,t),this._ws=null,n.memmory.isCanSendMessage=!1}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Start.ts",["cc"],(function(e){var t,a,n,c,o;return{setters:[function(e){t=e.cclegacy,a=e.Component,n=e.assetManager,c=e.director,o=e._decorator}],execute:function(){var r;t._RF.push({},"e022eg9DjBIaYzIksikh7Yn","Start",void 0);const{ccclass:s,property:d}=o;e("default",s(r=class extends a{onLoad(){n.loadBundle("loading",(async(e,t)=>{c.loadScene("Loading")}))}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Storage.ts",["cc","./Core.ts"],(function(t){var e,a,r;return{setters:[function(t){e=t.sys,a=t.cclegacy},function(t){r=t.default}],execute:function(){a._RF.push({},"23f8fGp5ChO+YgtfkSLXSZ/","Storage",void 0);t("default",class{constructor(){this._inited=!1,this._data={}}setItem(t,a){this._init(),this._data[t]=a,e.localStorage.setItem(r.user.userData.RoleUID,JSON.stringify(this._data))}getItem(t){return this._init(),this._data[t]}removeItem(t){delete this._data[t],e.localStorage.setItem(r.user.userData.RoleUID,JSON.stringify(this._data))}clearStorage(){var t;this._data={},e.localStorage.removeItem(null==(t=r.user.userData)?void 0:t.RoleUID),e.localStorage.removeItem("device_id"),e.localStorage.removeItem("phone"),e.localStorage.removeItem("custom_account")}_init(){if(this._inited)return;this._inited=!0;let t=e.localStorage.getItem(r.user.userData.RoleUID);t||(t="{}"),this._data=JSON.parse(t)}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/SuperLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SuperScrollview.ts"],(function(t){var i,e,o,r,s,h,n,a,d,l,c,u,T,p,g,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,r=t.ccenum,s=t.UITransform,h=t.Prefab,n=t.PageViewIndicator,a=t.EventHandler,d=t.Node,l=t.Vec2,c=t._decorator,u=t.Component,T=t.Vec3,p=t.Size,g=t.instantiate},function(t){f=t.SuperScrollview}],execute:function(){var m,v,x,_,y,O,w,I,B,P,A,b,H,R,S,L,E,z,D,F,M,C,V,G,N,X,Y,W,k,Z,j,U,q,J,K,Q,$,tt,it,et,ot,rt,st,ht,nt,at,dt,lt,ct,ut,Tt,pt,gt,ft,mt,vt,xt,_t,yt,Ot,wt,It,Bt,Pt,At,bt;o._RF.push({},"10970CldZJF/7MEGweog3Ay","SuperLayout",void 0);const{ccclass:Ht,property:Rt,requireComponent:St,menu:Lt}=c,Et=1e-5;var zt=function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t}(zt||{});r(zt);var Dt=function(t){return t[t.TOP_TO_BOTTOM=0]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=1]="BOTTOM_TO_TOP",t}(Dt||{});r(Dt);var Ft=function(t){return t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",t}(Ft||{});r(Ft);var Mt=function(t){return t[t.NONE=0]="NONE",t[t.HEADER=1]="HEADER",t[t.FOOTER=2]="FOOTER",t}(Mt||{}),Ct=function(t){return t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t}(Ct||{});r(Ct);var Vt=function(t){return t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t}(Vt||{});r(Vt);t("SuperLayout",(m=Ht("SuperLayout"),v=St(s),x=Lt("Custom/SuperLayout"),_=Rt(f),y=Rt(s),O=Rt(h),w=Rt({type:zt}),I=Rt({type:Ct,visible:function(){return this.layoutType==zt.VERTICAL&&!this.autoCenter}}),B=Rt({type:Vt,visible:function(){return this.layoutType==zt.HORIZONTAL&&!this.autoCenter}}),P=Rt({type:Dt}),A=Rt({type:Ft}),b=Rt({tooltip:"最小值=1,大于1就是Grid模式"}),H=Rt({tooltip:"决定最多创建Prefab的数量"}),R=Rt({tooltip:"顶部填充"}),S=Rt({tooltip:"底部填充"}),L=Rt({tooltip:"左侧填充"}),E=Rt({tooltip:"右侧填充"}),z=Rt({tooltip:"横轴间距"}),D=Rt({tooltip:"纵轴间距"}),F=Rt({tooltip:"计算缩放后的尺寸"}),M=Rt({tooltip:"开启翻页模式"}),C=Rt({tooltip:"每个页面翻页时所需时间。单位：秒",visible:function(){return this.isPageView}}),V=Rt({type:n,visible:function(){return this.isPageView}}),G=Rt({slide:!0,range:[0,1,.01],tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原",visible:function(){return this.isPageView}}),N=Rt({tooltip:"快速滑动翻页临界值。当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值,该值与此临界值相比较，如果大于临界值，则进行自动翻页",visible:function(){return this.isPageView}}),X=Rt({type:a,visible:function(){return this.isPageView}}),Y=Rt({tooltip:"开启自动居中",visible:function(){return!this.isPageView}}),W=Rt({tooltip:"自动居中的滚动时间",visible:function(){return this.autoCenter}}),k=Rt({type:d,tooltip:"自动居中的参考节点,如果为空、则默认选择View中心",visible:function(){return this.autoCenter}}),Z=Rt({type:l,tooltip:"自动居中时、Item的居中锚点",visible:function(){return this.autoCenter}}),j=Rt({tooltip:"上/左 无限循环"}),U=Rt({tooltip:"下/右 无限循环"}),q=Rt(a),m(J=v(J=x(((bt=class extends u{constructor(...t){super(...t),e(this,"scrollView",Q,this),e(this,"view",$,this),e(this,"prefab",tt,this),e(this,"layoutType",it,this),e(this,"indexVerticalAxisDirection",et,this),e(this,"indexHorizontalAxisDirection",ot,this),e(this,"verticalAxisDirection",rt,this),e(this,"horizontalAxisDirection",st,this),e(this,"groupItemTotal",ht,this),e(this,"multiple",nt,this),e(this,"paddingTop",at,this),e(this,"paddingBottom",dt,this),e(this,"paddingLeft",lt,this),e(this,"paddingRight",ct,this),e(this,"spacingX",ut,this),e(this,"spacingY",Tt,this),e(this,"affectedByScale",pt,this),e(this,"isPageView",gt,this),e(this,"pageTurningSpeed",ft,this),e(this,"indicator",mt,this),e(this,"scrollThreshold",vt,this),e(this,"autoPageTurningThreshold",xt,this),e(this,"pageEvents",_t,this),e(this,"autoCenter",yt,this),e(this,"centerTime",Ot,this),e(this,"centerNode",wt,this),e(this,"centerAnchor",It,this),e(this,"headerLoop",Bt,this),e(this,"footerLoop",Pt,this),e(this,"refreshItemEvents",At,this),this.stretchLock={},this._currPageIndex=0,this._lastPageIndex=0,this.isRestart=!1,this.scrollDirection=Mt.NONE,this.prevPos=new T(0,0,0),this._maxPrefabTotal=0,this.currentCreateItemTotal=0,this._itemTotal=0,this._centerPosition=void 0}get currPageIndex(){return this._currPageIndex}get lastPageIndex(){return this._lastPageIndex}get vertical(){return this.layoutType==zt.VERTICAL}get horizontal(){return this.layoutType==zt.HORIZONTAL}get transform(){return this.node._uiProps.uiTransformComp}get accommodWidth(){return this.view.width-this.paddingLeft-this.paddingRight}get accommodHeight(){return this.view.height-this.paddingTop-this.paddingBottom}get header(){return 0==this.node.children.length?null:this.node.children[0]._uiProps.uiTransformComp}get footer(){return 0==this.node.children.length?null:this.node.children[this.node.children.length-1]._uiProps.uiTransformComp}get headerIndex(){if(!this.header)return-1;return this.header.node.__index}get footerIndex(){if(!this.footer)return-1;return this.footer.node.__index}get viewStartPoint(){let t=new T;return this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?t.x=-.5*this.view.width+this.paddingLeft:t.x=.5*this.view.width-this.paddingRight,this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?t.y=.5*this.view.height-this.paddingTop:t.y=-.5*this.view.height+this.paddingBottom,t}get viewHeaderBoundary(){return this.vertical?.5*this.view.height:-.5*this.view.width}get viewFooterBoundary(){return this.vertical?-.5*this.view.height:.5*this.view.width}get headerBoundary(){return this.header?this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMax(this.header)+this.paddingTop:this.node.position.y+this.getItemYMin(this.header)-this.paddingBottom:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMin(this.header)-this.paddingLeft:this.node.position.x+this.getItemXMax(this.header)+this.paddingRight:0}get footerBoundary(){return this.footer?this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMin(this.footer)-this.paddingBottom:this.node.position.y+this.getItemYMax(this.footer)+this.paddingTop:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMax(this.footer)+this.paddingRight:this.node.position.x+this.getItemXMin(this.footer)-this.paddingLeft:0}get centerHeaderBoundary(){let t=this.vertical?"y":"x";var i;return i=this.centerNode?this.viewHeaderBoundary-this.centerNode.position[t]:this.viewHeaderBoundary-this.view.node.position[t],this.vertical&&this.verticalAxisDirection==Dt.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.headerBoundary+i:this.footerBoundary+i}get centerFooterBoundary(){let t=this.vertical?"y":"x";var i;return i=this.centerNode?this.viewFooterBoundary-this.centerNode.position[t]:this.viewFooterBoundary-this.view.node.position[t],this.vertical&&this.verticalAxisDirection==Dt.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.footerBoundary+i:this.headerBoundary+i}get isOfLeftBoundary(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Mt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.x;if(!this.header||this.fixedItemWidth<=this.view.width)return this.viewHeaderBoundary+this.node.position.x;if(this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}get isOfTopBoundary(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Mt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.y;if(!this.header||this.fixedItemHeight<=this.view.height)return this.viewHeaderBoundary+this.node.position.y;if(this.verticalAxisDirection==Dt.TOP_TO_BOTTOM){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}get isOfRightBoundary(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Mt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.x;if(!this.footer||this.fixedItemWidth<=this.view.width)return this.viewFooterBoundary+this.node.position.x;if(this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}get isOfButtomBoundary(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Mt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.y;if(!this.footer||this.fixedItemHeight<=this.view.height)return this.viewFooterBoundary+this.node.position.y;if(this.verticalAxisDirection==Dt.TOP_TO_BOTTOM){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}get fixedItemHeight(){return this.header?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?Math.abs(this.getItemYMax(this.header))+Math.abs(this.getItemYMin(this.footer)):Math.abs(this.getItemYMin(this.header))+Math.abs(this.getItemYMax(this.footer)):0}get fixedItemWidth(){return this.header?this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?Math.abs(this.getItemXMin(this.header))+Math.abs(this.getItemXMax(this.footer)):Math.abs(this.getItemXMax(this.header))+Math.abs(this.getItemXMin(this.footer)):0}get contentSize(){if(0==this.node.children.length)return this.view.contentSize;let t=new p(this.view.contentSize.width,this.view.contentSize.height);return this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?t.height=this.headerBoundary+-this.footerBoundary:t.height=this.footerBoundary+-this.headerBoundary:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?t.width=this.footerBoundary+-this.headerBoundary:t.width=this.headerBoundary+-this.footerBoundary,t.width<this.view.contentSize.width&&(t.width=this.view.contentSize.width),t.height<this.view.contentSize.height&&(t.height=this.view.contentSize.height),t}get maxPrefabTotal(){return this._maxPrefabTotal}get itemTotal(){return this._itemTotal}get centerPosition(){if(!this._centerPosition)if(this._centerPosition=new T,this.autoCenter){if(this.centerNode){var t;let i=null==(t=this.centerNode.parent)||null==(t=t._uiProps.uiTransformComp)?void 0:t.convertToWorldSpaceAR(this.centerNode.position);this._centerPosition=this.view.convertToNodeSpaceAR(i)}}else this.vertical?this.indexVerticalAxisDirection==Ct.TOP?this._centerPosition.y=this.viewHeaderBoundary:this._centerPosition.y=this.viewFooterBoundary:this.indexHorizontalAxisDirection==Vt.LEFT?this._centerPosition.x=this.viewHeaderBoundary:this._centerPosition.x=this.viewFooterBoundary;return this._centerPosition}onLoad(){var t,i,e;null==(t=this.transform)||t.setAnchorPoint(new l(.5,.5)),null==(i=this.transform)||i.setContentSize(this.view.contentSize),this.node.setPosition(T.ZERO),this.isPageView&&(this.autoCenter=!1),null==(e=this.scrollView.view)||e.node.on(d.EventType.SIZE_CHANGED,this.onViewSizeChange,this),Object.defineProperty(this.transform,"contentSize",{get:()=>this.contentSize}),Object.defineProperty(this.transform,"width",{get:()=>this.contentSize.width}),Object.defineProperty(this.transform,"height",{get:()=>this.contentSize.height})}onEnable(){this.addEventListener()}onDisable(){this.removeEventListener()}total(t,i=!1){this.scrollView.canTouchMove=!1,this.currentCreateItemTotal=t,this.createItems(t,i);let e=t-this.itemTotal;return this._itemTotal=t,this.refreshItems(e,i),i||this.updateItems(),this.scrollView.release(),this.indicator&&this.indicator.setPageView(this.scrollView),this.autoCenter&&this.scrollToCenter(),this.scrollView.canTouchMove=!0,this}updateItems(){return this.resetIndexStartToEnd(this.headerIndex),this}updateItemSize(t,i){this.groupItemTotal>1||t&&i&&(t.__runtime_size=i,this.onChangeChildSize(t._uiProps.uiTransformComp))}scrollToCenter(){this.soonFinish()}scrollToHeader(t){var i,e,o,r,s=0;this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?(s=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Ct.BOTTOM&&(s-=(null==(i=this.header)?void 0:i.height)+this.paddingTop+this.paddingBottom)):(s=this.viewFooterBoundary,this.indexVerticalAxisDirection==Ct.TOP&&(s+=(null==(e=this.header)?void 0:e.height)+this.paddingTop+this.paddingBottom)):this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?(s=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Vt.RIGHT&&(s+=(null==(o=this.header)?void 0:o.width)+this.paddingLeft+this.paddingRight)):(s=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Vt.LEFT&&(s-=(null==(r=this.header)?void 0:r.width)+this.paddingLeft+this.paddingRight));this.scrollToIndex(0,t,new T(s,s))}scrollToFooter(t){var i=0;if(this.vertical){if(this.fixedItemHeight<this.view.height)return;var e,o;if(this.verticalAxisDirection==Dt.TOP_TO_BOTTOM){if(i=this.viewFooterBoundary,this.indexVerticalAxisDirection==Ct.BOTTOM)i+=(null==(e=this.footer)?void 0:e.height)+this.paddingTop+this.paddingBottom}else if(i=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Ct.TOP)i-=(null==(o=this.footer)?void 0:o.height)+this.paddingTop+this.paddingBottom}else{if(this.fixedItemWidth<this.view.width)return;var r,s;if(this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT){if(i=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Vt.RIGHT)i-=(null==(r=this.footer)?void 0:r.width)+this.paddingLeft+this.paddingRight}else if(i=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Vt.LEFT)i+=(null==(s=this.footer)?void 0:s.width)+this.paddingLeft+this.paddingRight}this.scrollToIndex(this.itemTotal-1,t,new T(i,i),!0)}isNearFooter(t){let i=!1;if(t>this.footerIndex&&t<this.headerIndex){let e=Math.abs(t-this.headerIndex)<Math.abs(t-this.footerIndex);i=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?!e:e:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?!e:e}else t>this.footerIndex?i=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT:t<this.headerIndex&&(i=this.vertical?this.verticalAxisDirection!=Dt.TOP_TO_BOTTOM:this.horizontalAxisDirection!=Ft.LEFT_TO_RIGHT);return i}getFooterOffset(t){let i=this.footerIndex%this.groupItemTotal;return t%this.groupItemTotal-i+this.groupItemTotal}getHeaderOffset(t){return this.headerIndex%this.groupItemTotal-t%this.groupItemTotal+this.groupItemTotal}offsetToHeader(t){var i=0;i=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.getHeaderOffset(t):this.getFooterOffset(t):this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.getHeaderOffset(t):this.getFooterOffset(t),i-=this.groupItemTotal;for(let t=0;t<i;t++)this.pushToHeader(!0)}offsetToFooter(t){var i=0;i=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.getFooterOffset(t):this.getHeaderOffset(t):this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.getFooterOffset(t):this.getHeaderOffset(t),i-=this.groupItemTotal;for(let t=0;t<i;t++)this.pushToFooter(!0)}resetIndexStartToEnd(t){for(let i=0;i<this.node.children.length;i++){const e=this.node.children[i];e.__index=t,t++,(this.headerLoop||this.footerLoop)&&(t<0||t>=this.itemTotal)&&(t=0),this.notifyRefreshItem(e)}}resetIndexEndToStart(t){for(let i=this.node.children.length-1;i>=0;i--){const e=this.node.children[i];e.__index=t,t--,(this.headerLoop||this.footerLoop)&&t<0&&(t=this.itemTotal-1),this.notifyRefreshItem(e)}}scrollToIndex(t,i,e,o=!1){var r;if(isNaN(t)||t<0||t>this.itemTotal-1)return;this.scrollView.stopAutoScroll(),this.isPageView&&this.scrollView.savePageIndex(t);var s=this.node.children.find((i=>i.__index==t)),h=this.isNearFooter(t);if(this.stretchLock.index=t,this.stretchLock.timeInSecond=i,this.stretchLock.boundary=e,this.stretchLock.reverse=o,!s){0==t&&this.pushToHeader(),t==this.itemTotal-1&&this.pushToFooter();var n=this.vertical&&this.verticalAxisDirection==Dt.TOP_TO_BOTTOM||!this.vertical&&this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT;h?(this.offsetToFooter(t),n?this.resetIndexEndToStart(t):this.resetIndexStartToEnd(t)):(this.offsetToHeader(t),n?this.resetIndexStartToEnd(t):this.resetIndexEndToStart(t)),s=this.node.children.find((i=>i.__index==t))}if(!s)return;let a=s.getPosition().clone();this.autoCenter||(this.vertical?this.indexVerticalAxisDirection==Ct.TOP?a.y=o?this.getItemYMin(s._uiProps.uiTransformComp)-this.paddingBottom:this.getItemYMax(s._uiProps.uiTransformComp)+this.paddingTop:a.y=o?this.getItemYMax(s._uiProps.uiTransformComp)+this.paddingTop:this.getItemYMin(s._uiProps.uiTransformComp)-this.paddingBottom:this.indexHorizontalAxisDirection==Vt.LEFT?a.x=o?this.getItemXMax(s._uiProps.uiTransformComp)+this.paddingRight:this.getItemXMin(s._uiProps.uiTransformComp)-this.paddingLeft:a.x=o?this.getItemXMin(s._uiProps.uiTransformComp)-this.paddingLeft:this.getItemXMax(s._uiProps.uiTransformComp)+this.paddingRight);let d=null==(r=this.transform)?void 0:r.convertToWorldSpaceAR(a),l=this.view.convertToNodeSpaceAR(d);var c;c=!this.autoCenter&&e?e:this.getCenterAnchor(s._uiProps.uiTransformComp,this.centerPosition),l.multiply(new T(-1,-1,1)).add(c),this.scrollView.scrollToAny(l,i,!0)}async onViewSizeChange(){this.isRestart=!0,this.createItems(this.currentCreateItemTotal),this.resetChilds(!0),this.scrollToHeader();for(let t=0;t<this.node.children.length;t++){const i=this.node.children[t]._uiProps.uiTransformComp;this.setAndSaveSizeAndScale(i)}this.isRestart=!1}setAndSaveSizeAndScale(t){t.setContentSize(this.getItemSize(t)),t.node.__size=t.contentSize.clone(),t.node.__scale=t.node.getScale().clone()}getCenterAnchor(t,i){var e=i.clone();if(this.vertical){let i=t.height*this.centerAnchor.y,o=t.height*t.anchorY;e.y-=i-o}else{let i=t.width*this.centerAnchor.x,o=t.width*t.anchorX;e.x+=i-o}return e}soonFinish(){if(this.autoCenter&&!this.scrollView.pullRefresh){this.scrollView.stopAutoScroll();var t=new T(999999,999999);for(let o=0;o<this.node.children.length;o++){var i;const r=this.node.children[o];let s=null==(i=this.transform)?void 0:i.convertToWorldSpaceAR(r.position),h=this.view.convertToNodeSpaceAR(s),n={width:!1,height:!1};var e=this.getCenterAnchor(r._uiProps.uiTransformComp,this.centerPosition);let a=h.subtract(e);n.width=Math.abs(a.x)<Math.abs(t.x),n.height=Math.abs(a.y)<Math.abs(t.y),(this.vertical&&n.height||!this.vertical&&n.width)&&(t=a)}t.multiply(new T(-1,-1,1)),this.scrollView.scrollToAny(t,this.centerTime)}}getItemSize(t){let i=new p;if(this.vertical){let e=this.spacingX*(this.groupItemTotal-1);i.width=(this.accommodWidth-e)/this.groupItemTotal,i.height=t.height}else{let e=this.spacingY*(this.groupItemTotal-1);i.height=(this.accommodHeight-e)/this.groupItemTotal,i.width=t.width}return i}getItemYMax(t){if(!t)return 0;let i=this.getScaleHeight(t)*(1-t.anchorY);return t.node.position.y+i}getItemYMin(t){if(!t)return 0;let i=this.getScaleHeight(t)*t.anchorY;return t.node.position.y-i}getItemXMax(t){if(!t)return 0;let i=this.getScaleWidth(t)*(1-t.anchorX);return t.node.position.x+i}getItemXMin(t){if(!t)return 0;let i=this.getScaleWidth(t)*t.anchorX;return t.node.position.x-i}getStartX(t){if(!t)return 0;var i=0;if(this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT){let e=this.getScaleWidth(t)*t.anchorX;i=this.viewStartPoint.x+e}else{let e=this.getScaleWidth(t)*(1-t.anchorX);i=this.viewStartPoint.x-e}return i}getEndX(t){if(!t)return 0;var i=0;if(this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT){let e=this.getScaleWidth(t)*(1-t.anchorX);i=-this.viewStartPoint.x-e-this.paddingRight+this.paddingLeft}else{let e=this.getScaleWidth(t)*t.anchorX;i=-this.viewStartPoint.x+e+this.paddingLeft-this.paddingRight}return i}getStartY(t){if(!t)return 0;var i=0;if(this.verticalAxisDirection==Dt.TOP_TO_BOTTOM){let e=this.getScaleHeight(t)*(1-t.anchorY);i=this.viewStartPoint.y-e}else{let e=this.getScaleHeight(t)*t.anchorY;i=this.viewStartPoint.y+e}return i}getEndY(t){if(!t)return 0;var i=0;if(this.verticalAxisDirection==Dt.TOP_TO_BOTTOM){let e=this.getScaleHeight(t)*t.anchorY;i=-this.viewStartPoint.y+e+this.paddingBottom-this.paddingTop}else{let e=this.getScaleHeight(t)*(1-t.anchorY);i=-this.viewStartPoint.y-e-this.paddingTop+this.paddingBottom}return i}isAccommodateByTop(t){return this.getItemYMax(t)+this.paddingTop<.5*this.accommodHeight}isAccommodateByBottom(t){return this.getItemYMin(t)-this.paddingBottom>-.5*this.accommodHeight}isAccommodateByLeft(t){return this.getItemXMin(t)-this.paddingLeft>-.5*this.accommodWidth}isAccommodateByRight(t){return this.getItemXMax(t)+this.paddingRight<.5*this.accommodWidth}getRelativeByLeft(t,i){return this.getItemXMin(i)-this.spacingX-this.getScaleWidth(t)*(1-t.anchorX)}getRelativeByRight(t,i){return this.getItemXMax(i)+this.spacingX+this.getScaleWidth(t)*t.anchorX}getRelativeByTop(t,i){return this.getItemYMax(i)+this.spacingY+this.getScaleHeight(t)*t.anchorY}getRelativeByBottom(t,i){return this.getItemYMin(i)-this.spacingY-this.getScaleHeight(t)*(1-t.anchorY)}setItemPosition(t,i,e=!1,o=!1){var r=new T;o?(r.x=this.getStartX(t),r.y=this.getStartY(t)):r=this.vertical?this.getVerticalRelativePosition(t,i,e):this.getHorizontalRelativePosition(t,i,e),t.node.setPosition(r)}getVerticalRelativePosition(t,i,e){var o=new T,r=!1;return r=this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?e?this.isAccommodateByLeft(i):this.isAccommodateByRight(i):e?this.isAccommodateByRight(i):this.isAccommodateByLeft(i),this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?o.x=e?r?this.getRelativeByLeft(t,i):this.getEndX(t):r?this.getRelativeByRight(t,i):this.getStartX(t):o.x=e?r?this.getRelativeByRight(t,i):this.getEndX(t):r?this.getRelativeByLeft(t,i):this.getStartX(t),this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?o.y=e?r?i.node.position.y:this.getRelativeByTop(t,i):r?i.node.position.y:this.getRelativeByBottom(t,i):o.y=e?r?i.node.position.y:this.getRelativeByBottom(t,i):r?i.node.position.y:this.getRelativeByTop(t,i),o}getHorizontalRelativePosition(t,i,e){var o=new T,r=!1;return r=this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?e?this.isAccommodateByTop(i):this.isAccommodateByBottom(i):e?this.isAccommodateByBottom(i):this.isAccommodateByTop(i),this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?o.y=e?r?this.getRelativeByTop(t,i):this.getEndY(t):r?this.getRelativeByBottom(t,i):this.getStartY(t):o.y=e?r?this.getRelativeByBottom(t,i):this.getEndY(t):r?this.getRelativeByTop(t,i):this.getStartY(t),this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?o.x=e?r?i.node.position.x:this.getRelativeByLeft(t,i):r?i.node.position.x:this.getRelativeByRight(t,i):o.x=e?r?i.node.position.x:this.getRelativeByRight(t,i):r?i.node.position.x:this.getRelativeByLeft(t,i),o}refreshItems(t,i=!1){if(t<0){for(let i=0;i<-t;i++)this.headerLoop||this.footerLoop?this.pushToHeader():(this.pushToHeader(!0),this.pushToFooter());let e=this.headerIndex>0?this.headerIndex:0;e+this.node.children.length>this.itemTotal&&(e+=t),e<0&&(e=0);for(let t=0;t<this.node.children.length;t++){const o=this.node.children[t];(this.headerLoop||this.footerLoop)&&e>this.itemTotal-1&&(e=0),o.__index=e,e++,i&&this.notifyRefreshItem(o)}this.scrollView.stopAutoScroll(),this.scrollView.startAutoScroll()}else for(let t=0;t<this.node.children.length;t++)this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.pushToFooter():this.pushToHeader():this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.pushToFooter():this.pushToHeader()}createItems(t,i=!1){if(this.node.children.length>t)return void this.removeItems(t);if(!this.needAddPrefab()&&this._maxPrefabTotal>0&&this._maxPrefabTotal==this.node.children.length)return;let e=t-this.node.children.length;for(let t=0;t<e;t++){let t=g(this.prefab);const i=t._uiProps.uiTransformComp;this.setAndSaveSizeAndScale(i),t.__index=this.node.children.length,this.node.addChild(t);var o,r=this.node.children.length-2;if(o=0==t.__index?this.footer:this.node.children[r]._uiProps.uiTransformComp,t.on(d.EventType.SIZE_CHANGED,(()=>{this.onChangeChildSize(i)}),this,!0),t.on(d.EventType.TRANSFORM_CHANGED,(t=>{this.onChangeChildScale(t,i)}),this,!0),this.notifyRefreshItem(t),this.setItemPosition(t._uiProps.uiTransformComp,o,!1,0==t.__index),!this.needAddPrefab()){this._maxPrefabTotal=this.node.children.length;break}}}needAddPrefab(){const t=this.vertical?this.contentSize.height:this.contentSize.width;if(t>0){if(t<(this.vertical?this.view.height:this.view.width)*this.multiple)return!0}return!1}async onChangeChildSize(t){const i=t.node;if(this.groupItemTotal>1){const e=i.__size;return t.setContentSize(e),void console.warn("表格布局不支持动态修改 Size,如果你非要修改，那你把我注释掉看效果")}this.stretchLock.index==i.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems()}async onChangeChildScale(t,i){if(t!==d.TransformBit.SCALE)return;if(!this.affectedByScale)return;const e=i.node;if(this.groupItemTotal>1){const t=e.__scale;return i.node.setScale(t),void console.warn("表格布局不支持动态修改 Scale,如果你非要修改，那你把我注释掉看效果")}this.stretchLock.index==e.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems()}resetStrectchItems(){if(!isNaN(this.stretchLock.index)){const t=this.node.children.findIndex((t=>t.__index==this.stretchLock.index));if(-1!=t){for(let i=t;i>=0;i--){const e=this.node.children[i];i!=t&&(i<t&&this.setItemPosition(e._uiProps.uiTransformComp,this.node.children[i+1]._uiProps.uiTransformComp,!0))}for(let i=t;i<this.node.children.length;i++){const e=this.node.children[i];i!=t&&this.setItemPosition(e._uiProps.uiTransformComp,this.node.children[i-1]._uiProps.uiTransformComp)}return}}this.scrollDirection==Mt.HEADER?(this.unschedule(this.stretchToFooter),this.scheduleOnce(this.stretchToFooter)):(this.unschedule(this.stretchToHeader),this.scheduleOnce(this.stretchToHeader))}stretchToHeader(){for(let t=this.node.children.length-1;t>=0;t--){const i=this.node.children[t];t!=this.node.children.length-1&&this.setItemPosition(i._uiProps.uiTransformComp,this.node.children[t+1]._uiProps.uiTransformComp,!0)}}stretchToFooter(){for(let t=0;t<this.node.children.length;t++){const i=this.node.children[t];0!=t&&this.setItemPosition(i._uiProps.uiTransformComp,this.node.children[t-1]._uiProps.uiTransformComp)}}removeItems(t){let i=this.node.children.length-t;for(let t=0;t<i;t++){var e=this.node.children[this.node.children.length-1];e.off(d.EventType.SIZE_CHANGED),e.off(d.EventType.TRANSFORM_CHANGED),this.node.removeChild(e),e.destroy()}}addEventListener(){this.node.on(d.EventType.TRANSFORM_CHANGED,this.onPositionChanged,this)}removeEventListener(){this.node.off(d.EventType.TRANSFORM_CHANGED,this.onPositionChanged,this)}resetChilds(t=!1){if(this.vertical&&this.fixedItemHeight<=this.view.height||!this.vertical&&this.fixedItemWidth<=this.view.width){var i;let t=this.getStartX(this.header),e=this.getStartY(this.header);null==(i=this.header)||i.node.setPosition(new T(t,e))}if(t)if(this.vertical){var e;let t=this.getStartX(this.header);null==(e=this.header)||e.node.setPosition(new T(t,this.header.node.position.y))}else{var o;let t=this.getStartY(this.header);null==(o=this.header)||o.node.setPosition(new T(this.header.node.position.x,t))}this.stretchToFooter(),t||this.scrollView.startAutoScroll()}onTouchBegin(){this.stretchLock={}}getUsedScaleValue(t){return this.affectedByScale?Math.abs(t):1}getScaleWidth(t){if(!t)return 0;const i=t.node.__runtime_size;return(i?i.width:t.width)*this.getUsedScaleValue(t.node.scale.x)}getScaleHeight(t){if(!t)return 0;const i=t.node.__runtime_size;return(i?i.height:t.height)*this.getUsedScaleValue(t.node.scale.y)}onPositionChanged(){if(!this.isRestart){if(this.vertical?this.scrollView.prevLocation.y<this.scrollView.location.y?this.scrollDirection=Mt.FOOTER:this.scrollView.prevLocation.y>this.scrollView.location.y?this.scrollDirection=Mt.HEADER:this.scrollDirection=Mt.NONE:this.scrollView.prevLocation.x>this.scrollView.location.x?this.scrollDirection=Mt.FOOTER:this.scrollView.prevLocation.x<this.scrollView.location.x?this.scrollDirection=Mt.HEADER:this.scrollDirection=Mt.NONE,this.vertical)for(let t=0;t<this.node.children.length;t++){Math.abs(this.prevPos.y-this.node.position.y)>Et&&(this.prevPos.y<this.node.position.y?this.pushToFooter():this.prevPos.y>this.node.position.y&&this.pushToHeader())}else for(let t=0;t<this.node.children.length;t++){Math.abs(this.prevPos.x-this.node.position.x)>Et&&(this.prevPos.x>this.node.position.x?this.pushToFooter():this.prevPos.x<this.node.position.x&&this.pushToHeader())}this.prevPos=this.node.position.clone()}}pushToFooter(t=!1){var i,e,o,r;this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?(t||this.headerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(i=this.header)?void 0:i.height))&&this.pushToFooterHandler():(t||this.footerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(e=this.header)?void 0:e.height))&&this.pushToHeaderHandler():this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?(t||this.headerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(o=this.header)?void 0:o.width))&&this.pushToFooterHandler():(t||this.footerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(r=this.header)?void 0:r.width))&&this.pushToHeaderHandler()}pushToHeader(t=!1){var i,e,o,r;this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?(t||this.footerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(i=this.footer)?void 0:i.height))&&this.pushToHeaderHandler():(t||this.headerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(e=this.footer)?void 0:e.height))&&this.pushToFooterHandler():this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?(t||this.footerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(o=this.footer)?void 0:o.width))&&this.pushToHeaderHandler():(t||this.headerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(r=this.footer)?void 0:r.width))&&this.pushToFooterHandler()}pushToFooterHandler(){var t,i,e=null==(t=this.header)?void 0:t.node;let o;if(o=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.footerLoop:this.headerLoop:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.footerLoop:this.headerLoop,o)this.footerIndex>=this.itemTotal-1?e.__index=0:e.__index=this.footerIndex+1;else{if(!this.footer||this.footerIndex>=this.itemTotal-1)return;e.__index=this.footerIndex+1}e.__index>=0&&e.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(e),this.setItemPosition(this.header,this.footer),null==(i=this.header)||i.node.setSiblingIndex(this.node.children.length)}pushToHeaderHandler(){var t,i,e=null==(t=this.footer)?void 0:t.node;let o;(o=this.vertical?this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.headerLoop:this.footerLoop:this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.headerLoop:this.footerLoop,o||0!=this.headerIndex)||(this.vertical?this.horizontalAxisDirection==Ft.LEFT_TO_RIGHT?this.isAccommodateByLeft(this.header):this.isAccommodateByRight(this.header):this.verticalAxisDirection==Dt.TOP_TO_BOTTOM?this.isAccommodateByTop(this.header):this.isAccommodateByBottom(this.header))&&this.resetChilds(!0);if(o)0==this.headerIndex?e.__index=this.itemTotal-1:e.__index=this.headerIndex-1;else{if(!this.header||0==this.headerIndex)return;e.__index=this.headerIndex-1}e.__index>=0&&e.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(e),this.setItemPosition(this.footer,this.header,!0),null==(i=this.footer)||i.node.setSiblingIndex(0)}notifyRefreshItem(t){a.emitEvents(this.refreshItemEvents,t,t.__index)}}).VerticalAxisDirection=Dt,bt.HorizontalAxisDirection=Ft,Q=i((K=bt).prototype,"scrollView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=i(K.prototype,"view",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=i(K.prototype,"prefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=i(K.prototype,"layoutType",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zt.VERTICAL}}),et=i(K.prototype,"indexVerticalAxisDirection",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ct.TOP}}),ot=i(K.prototype,"indexHorizontalAxisDirection",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Vt.LEFT}}),rt=i(K.prototype,"verticalAxisDirection",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Dt.TOP_TO_BOTTOM}}),st=i(K.prototype,"horizontalAxisDirection",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ft.LEFT_TO_RIGHT}}),ht=i(K.prototype,"groupItemTotal",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nt=i(K.prototype,"multiple",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),at=i(K.prototype,"paddingTop",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dt=i(K.prototype,"paddingBottom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lt=i(K.prototype,"paddingLeft",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ct=i(K.prototype,"paddingRight",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ut=i(K.prototype,"spacingX",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tt=i(K.prototype,"spacingY",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pt=i(K.prototype,"affectedByScale",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gt=i(K.prototype,"isPageView",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ft=i(K.prototype,"pageTurningSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),mt=i(K.prototype,"indicator",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=i(K.prototype,"scrollThreshold",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),xt=i(K.prototype,"autoPageTurningThreshold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),_t=i(K.prototype,"pageEvents",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=i(K.prototype,"autoCenter",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ot=i(K.prototype,"centerTime",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),wt=i(K.prototype,"centerNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=i(K.prototype,"centerAnchor",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(.5,.5)}}),Bt=i(K.prototype,"headerLoop",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=i(K.prototype,"footerLoop",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),At=i(K.prototype,"refreshItemEvents",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=K))||J)||J)||J));o._RF.pop()}}}));

System.register("chunks:///_virtual/SuperPageView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,l,a,h,n,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){i=e.cclegacy,l=e._decorator,a=e.PageView,h=e.Node,n=e.UITransform,o=e.v3}],execute:function(){var r,c,g,d,u,_,p,P;i._RF.push({},"40025Ef7T9BxqKZGXxGvsnO","SuperPageView",void 0);const{ccclass:x,property:I,menu:f}=l;e("default",(r=x("SuperPageView"),c=f("Custom/SuperPageView"),g=I({tooltip:"是否开启自动滚动"}),d=I({tooltip:"自动滚动延迟时间",visible(){return this.auto}}),r(u=c((p=t((_=class extends a{constructor(...e){super(...e),s(this,"auto",p,this),s(this,"scroll_delay",P,this),this._allPages=[]}onLoad(){super.onLoad();let e=[];this._pages.forEach((t=>{e.push(t)})),this.removeAllPages(),e.forEach((e=>{this.addPage(e)}))}onEnable(){super.onEnable(),this._pages.forEach(((e,t)=>{e.attr({indicator_index:t})})),this._autoScroll(),this.node.on("scrolling",this.hidePage,this)}onDisable(){super.onDisable(),this._stopScroll(),this.node.off("scrolling",this.hidePage,this)}addPage(e){let t=this.pushEmptyNode(e);super.addPage(t),t.attr({indicator_index:this._pages.length-1}),this._allPages.push(e),this.hidePage()}pushEmptyNode(e){let t=new h,s=t.addComponent(n),i=e.getComponent(n);return s.width=i.width,s.height=i.height,t}get curPageIdx(){return this._pages[this._curPageIdx].indicator_index??0}_onTouchMoved(e,t){if(super._onTouchMoved(e,t),this._stopScroll(),0!==this._curPageIdx&&this._curPageIdx!==this._pages.length-1)return;let s=this.content.children[this._curPageIdx],i=e.getDeltaX();i<0?this._curPageIdx===this._pages.length-1&&(s.setSiblingIndex(0),this._changIndex(s,!0),this.scrollToPage(0,0)):i>0&&0===this._curPageIdx&&(s.setSiblingIndex(this._pages.length-1),this._changIndex(s,!1),this.scrollToPage(this._pages.length-1,0))}_onTouchEnded(e,t){super._onTouchEnded(e,t),this._autoScroll()}_onTouchCancelled(e,t){super._onTouchCancelled(e,t),this._autoScroll()}scrollToPage(e,t=.3){super.scrollToPage(e,t),this.hidePage()}hidePage(){let e=this.content.children.findIndex((e=>e.indicator_index===this.curPageIdx));if(-1===e)return;const t=this._pages.length,s=(e-1+t)%t,i=(e+1)%t;this._pages.forEach(((t,l)=>{var a;if(l===e)t.addChild(this._allPages[this.curPageIdx]);else if(l===s){const e=(this.curPageIdx-1+this._allPages.length)%this._allPages.length;t.addChild(this._allPages[e])}else if(l===i){const e=(this.curPageIdx+1)%this._allPages.length;t.addChild(this._allPages[e])}else t.removeAllChildren();t.children.length,null==(a=t.children[0])||a.setPosition(o(0,0,0))}))}scrollToLast(){if(0===this._curPageIdx){let e=this.content.children[this._curPageIdx];e.setSiblingIndex(this._pages.length-1),this._changIndex(e,!1),this.scrollToPage(this._pages.length-1,0)}this.scrollToPage(this._curPageIdx-1)}scrollToNext(){this._startScroll()}_autoScroll(){this.auto}_stopScroll(){this.unschedule(this._startScroll)}_startScroll(){if(this._curPageIdx==this._pages.length-1){let e=this.content.children[this._curPageIdx];e.setSiblingIndex(0),this._changIndex(e,!0),this.scrollToPage(0,0),this.scrollToPage(1)}else this.scrollToPage(this._curPageIdx+1)}_changIndex(e,t){let s=this._pages.findIndex((t=>t.indicator_index===e.indicator_index));-1!==s&&(this._pages.splice(s,1),t?this._pages.unshift(e):this._pages.push(e))}}).prototype,"auto",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=t(_.prototype,"scroll_delay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),u=_))||u)||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/SuperScrollview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SuperLayout.ts"],(function(t){var e,i,o,s,r,a,h,n,l,u,c,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,s=t.Vec2,r=t.EventHandler,a=t._decorator,h=t.ScrollView,n=t.PageView,l=t.Node,u=t.EventTouch,c=t.Vec3},function(t){d=t.SuperLayout}],execute:function(){var g,y,f,_,v,p,T,E,O,m,P,S,L,b,x,B,I,M,C;o._RF.push({},"be79fzP/5lMpogZxFpO6aVK","SuperScrollview",void 0);const{ccclass:H,property:R,menu:k}=a,A=1e-4,F=new s;let w=t("ScrollViewDirection",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.NONE=2]="NONE",t}({}));t("SuperScrollview",(g=H("SuperScrollview"),y=k("Custom/SuperScrollview"),f=R({tooltip:"注意！向上传递事件只会发送当前滑动相反方向,如果开启horizontal则会发送vertical事件。如果开启vertical则会发送horizontal事件。同时开启horizontal和vertical 不会发送任何事件"}),_=R({displayName:"顶部偏移量",tooltip:"下拉时超过此偏移会发送下拉事件",visible:function(){return this.pullRefresh}}),v=R({displayName:"满足触发Header的倍数",visible:function(){return this.pullRefresh}}),p=R({displayName:"底部偏移量",tooltip:"上拉时超过此偏移会发送上拉事件",visible:function(){return this.pullRefresh}}),T=R({displayName:"满足触发Footer的倍数",visible:function(){return this.pullRefresh}}),E=R({type:r,visible:function(){return this.pullRefresh}}),O=R({type:r,visible:function(){return this.pullRefresh}}),g(m=y((S=e((P=class extends h{constructor(...t){super(...t),this.direction=w.NONE,this._layout=void 0,i(this,"isTransmitEvent",S,this),i(this,"pullRefresh",L,this),i(this,"headerOutOffset",b,this),i(this,"headerMultiple",x,this),i(this,"footerOutOffset",B,this),i(this,"footerMultiple",I,this),i(this,"headerEvents",M,this),i(this,"footerEvents",C,this),this.prevLocation=new s,this.location=new s,this._touchBeganPosition=new s,this._touchEndPosition=new s,this.isMoveHeader=!1,this.isMoveFooter=!1,this.isLockHeader=!1,this.isLockFooter=!1,this.headerProgress=0,this.footerProgress=0,this.isCustomScroll=!1,this.canTouchMove=!0,this.isCallSoonFinish=!1}set autoScrolling(t){this._autoScrolling=t}onLoad(){this.layout.autoCenter&&(this.brake=.7)}onEnable(){super.onEnable(),this.node.on(n.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)}onDisable(){super.onDisable(),this.node.off(n.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)}_onMouseWheel(){}get layout(){var t;this._layout||(this._layout=null==(t=this.content)?void 0:t.getComponent(d));return this._layout}get curPageIdx(){return this.layout._currPageIndex}getPages(){return new Array(this.layout.itemTotal)}_getContentTopBoundary(){if(!this._content)return-1;return 0==this.layout.isOfTopBoundary?this._topBoundary:this.layout.isOfTopBoundary}_getContentBottomBoundary(){if(!this._content)return-1;return 0==this.layout.isOfButtomBoundary?this._bottomBoundary:this.layout.isOfButtomBoundary}_getContentLeftBoundary(){if(!this._content)return-1;return 0==this.layout.isOfLeftBoundary?this._leftBoundary:this.layout.isOfLeftBoundary}_getContentRightBoundary(){if(!this._content)return-1;return 0==this.layout.isOfRightBoundary?this._rightBoundary:this.layout.isOfRightBoundary}_onTouchBegan(t,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.layout.onTouchBegin(),this.canTouchMove&&(this.direction=w.NONE,this.layout.isPageView&&(t.touch.getUILocation(F),s.set(this._touchBeganPosition,F.x,F.y)),super._onTouchBegan(t,e),this.isTransmitEvent&&this.transmitEvent(t,l.EventType.TOUCH_START))}_onTouchMoved(t,e){var i,o;if(this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove){if(this.isTransmitEvent){if(this.direction==w.NONE){var s=t.getStartLocation(),a=t.getLocation(),h=Math.abs(s.x-a.x),n=Math.abs(s.y-a.y);h>n?this.direction=w.HORIZONTAL:n>h&&(this.direction=w.VERTICAL)}if(this.vertical&&this.direction===w.HORIZONTAL||this.horizontal&&this.direction==w.VERTICAL)return void this.transmitEvent(t,l.EventType.TOUCH_MOVE)}if(this.prevLocation=null==(i=t.touch)?void 0:i.getPreviousLocation(),this.location=null==(o=t.touch)?void 0:o.getLocation(),super._onTouchMoved(t,e),this.pullRefresh){let t=this._getHowMuchOutOfBoundary(),e=this.vertical?t.y:-t.x;e>0&&!this.isLockHeader&&!this.isLockFooter?(this.headerProgress=e<A?0:e/this.headerOutOffset,this.isMoveHeader=this.headerProgress>=this.headerMultiple,r.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:this.isMoveHeader?"wait":"touch"}),r.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})):e<0&&!this.isLockHeader&&!this.isLockFooter?(this.footerProgress=-e<A?0:-e/this.footerOutOffset,this.isMoveFooter=this.footerProgress>=this.footerMultiple,r.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:this.isMoveFooter?"wait":"touch"}),r.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"})):0!=e||this.isLockHeader||this.isLockFooter||this.clearProgress()}}}_onTouchEnded(t,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(t.touch.getUILocation(F),s.set(this._touchEndPosition,F.x,F.y)),super._onTouchEnded(t,e),this.isTransmitEvent&&this.transmitEvent(t,l.EventType.TOUCH_END))}_onTouchCancelled(t,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(t.touch.getUILocation(F),s.set(this._touchEndPosition,F.x,F.y)),this.isTransmitEvent&&this.transmitEvent(t,l.EventType.TOUCH_CANCEL),super._onTouchCancelled(t,e))}scrollToAny(t,e,i=!0){this.isCustomScroll=!0,e?this._startAutoScroll(t,e,i,!0):this._moveContent(t)}release(){this.isMoveHeader=!1,this.isMoveFooter=!1,(this.isLockHeader||this.isLockFooter)&&(this.vertical&&this.isLockHeader&&(this._topBoundary+=this.headerOutOffset),this.vertical&&this.isLockFooter&&(this._bottomBoundary-=this.footerOutOffset),this.horizontal&&this.isLockHeader&&(this._leftBoundary-=this.headerOutOffset),this.horizontal&&this.isLockFooter&&(this._rightBoundary+=this.footerOutOffset),this.clearProgress(),this.layout.onPositionChanged(),this.isLockHeader=!1,this.isLockFooter=!1,this.startAutoScroll())}startAutoScroll(){this._autoScrolling=!0,this._outOfBoundaryAmountDirty=!0}_startAutoScroll(t,e,i,o=!1){if(this.pullRefresh&&(this.isMoveHeader&&!this.isLockHeader?(this.vertical&&(this._topBoundary-=this.headerOutOffset,t.y-=this.headerOutOffset),this.horizontal&&(this._leftBoundary+=this.headerOutOffset,t.x+=this.headerOutOffset),this.isLockHeader=!0,r.emitEvents(this.headerEvents,this,{action:!0,progress:this.headerProgress,stage:"lock"})):this.isMoveFooter&&!this.isLockFooter&&(this.vertical&&(this._bottomBoundary+=this.footerOutOffset,t.y+=this.footerOutOffset),this.horizontal&&(this._rightBoundary-=this.footerOutOffset,t.x-=this.footerOutOffset),this.isLockFooter=!0,r.emitEvents(this.footerEvents,this,{action:!0,progress:this.footerProgress,stage:"lock"}))),super._startAutoScroll(t,e,i),!o&&this.layout.autoCenter){const t=this._calculateTouchMoveVelocity();this.isQuicklyScrollable(t)||this.soonFinish()}}_updateScrollBar(t){if(super._updateScrollBar(new s(t.x,t.y)),this._autoScrollBraking)return;if(!this._autoScrolling)return;if(!this.pullRefresh)return;let e=this.vertical?t.y:-t.x;if(e>0){let t=e<A?0:e/this.headerOutOffset;this.isLockHeader?(this.headerProgress=1==this.headerProgress?this.headerProgress:Math.max(t,1),r.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"lock"})):(this.headerProgress=t<this.headerProgress?t:this.headerProgress,r.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"release"}))}else if(e<0){let t=-e<A?0:-e/this.footerOutOffset;this.isLockFooter?(this.footerProgress=1==this.footerProgress?this.footerProgress:Math.max(t,1),r.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"lock"})):(this.footerProgress=t<this.footerProgress?t:this.footerProgress,r.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"release"}))}else 0==e&&(this.isLockHeader||this.isLockFooter||this.clearProgress())}clearProgress(){r.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"}),r.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})}dispatchPageTurningEvent(){this.layout._lastPageIndex!==this.layout._currPageIndex&&(this.layout._lastPageIndex=this.layout._currPageIndex,r.emitEvents(this.layout.pageEvents,this,n.EventType.PAGE_TURNING),this.node.emit(n.EventType.PAGE_TURNING,this))}_handleReleaseLogic(t){this.layout.isPageView?(this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(h.EventType.SCROLL_ENDED))):super._handleReleaseLogic(t)}_autoScrollToPage(){if(this._startBounceBackIfNeeded()){const t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this.layout.horizontal?this.layout.horizontalAxisDirection==d.HorizontalAxisDirection.LEFT_TO_RIGHT?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0:this.layout.verticalAxisDirection==d.VerticalAxisDirection.TOP_TO_BOTTOM?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0),(t.x<0||t.y>0)&&(this.layout.horizontal?this.layout.horizontalAxisDirection==d.HorizontalAxisDirection.LEFT_TO_RIGHT?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout.verticalAxisDirection==d.VerticalAxisDirection.TOP_TO_BOTTOM?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1),this.layout.indicator&&this.layout.indicator._changedState()}else{const i=new s;s.subtract(i,this._touchBeganPosition,this._touchEndPosition);const o=this.layout._currPageIndex;var t=o+this.getDragDirection(i),e=this.layout.pageTurningSpeed*Math.abs(o-t);this.layout.footerLoop&&t>=this.layout.itemTotal&&(t=0),this.layout.headerLoop&&t<0&&(t=this.layout.itemTotal-1);if(t<this.layout.itemTotal){if(this.isScrollable(i,o,t))return void this.scrollToPage(t,e);{const i=this._calculateTouchMoveVelocity();if(this.isQuicklyScrollable(i))return void this.scrollToPage(t,e)}}this.scrollToPage(o,e)}}savePageIndex(t){return!(t<0||t>=this.layout.itemTotal)&&(this.layout._currPageIndex=t,this.layout.indicator&&this.layout.indicator._changedState(),!0)}scrollToPage(t,e=.3){t<0||t>=this.layout.itemTotal||this.savePageIndex(t)&&this.layout.scrollToIndex(t,e)}isQuicklyScrollable(t){if(this.horizontal){if(Math.abs(t.x)>this.layout.autoPageTurningThreshold)return!0}else if(this.vertical&&Math.abs(t.y)>this.layout.autoPageTurningThreshold)return!0;return!1}getDragDirection(t){return this.horizontal?0===t.x?0:this.layout.horizontalAxisDirection==d.HorizontalAxisDirection.LEFT_TO_RIGHT?t.x>0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.x<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:0===t.y?0:this.layout.verticalAxisDirection==d.VerticalAxisDirection.TOP_TO_BOTTOM?t.y<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.y>0?this.layout.groupItemTotal:-this.layout.groupItemTotal}isScrollable(t,e,i){const o=this.view;return!!o&&(this.horizontal?Math.abs(t.x)>=o.width*this.layout.scrollThreshold:!!this.vertical&&Math.abs(t.y)>=o.height*this.layout.scrollThreshold)}transmitEvent(t,e){var i=new u(t.getTouches(),t.bubbles,e);i.type=e,i.touch=t.touch,t.target.parent.dispatchEvent(i)}soonFinish(){this.isCallSoonFinish=!0,this.layout.soonFinish()}_processAutoScrolling(t){const e=this._isNecessaryAutoScrollBrake(),i=e?.015:1;this._autoScrollAccumulatedTime+=t*(1/i);let o=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);var s;this._autoScrollAttenuate&&(s=o,o=(s-=1)*s*s*s*s+1);const r=this._autoScrollTargetDelta.clone();r.multiplyScalar(o);const a=this._autoScrollStartPosition.clone();a.add(r);let n=Math.abs(o-1)<=A;if(Math.abs(o-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(h.EventType.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){const t=a.clone();t.subtract(this._autoScrollBrakingStartPosition),e&&t.multiplyScalar(i),a.set(this._autoScrollBrakingStartPosition),a.add(t)}else{const t=a.clone();t.subtract(this.getContentPosition());const e=this._getHowMuchOutOfBoundary(t);e.equals(c.ZERO,A)||(a.add(e),n=!0)}n&&(this._autoScrolling=!1),!this.layout.autoCenter||this.isCallSoonFinish||this.isCustomScroll||(this._autoScrollTotalTime<2||o>=.8)&&this.soonFinish();const l=a.clone();l.subtract(this.getContentPosition()),this._clampDelta(l),this._moveContent(l,n),this._dispatchEvent(h.EventType.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(h.EventType.SCROLL_ENDED))}}).prototype,"isTransmitEvent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=e(P.prototype,"pullRefresh",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=e(P.prototype,"headerOutOffset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),x=e(P.prototype,"headerMultiple",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),B=e(P.prototype,"footerOutOffset",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),I=e(P.prototype,"footerMultiple",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),M=e(P.prototype,"headerEvents",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=e(P.prototype,"footerEvents",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=P))||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/SwipeListener.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SwitchTab.ts","./ToggleGroup.ts"],(function(t){var i,o,e,s,n,h,l,r,c,u,a,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){e=t.cclegacy,s=t.CCBoolean,n=t.ScrollView,h=t._decorator,l=t.Component,r=t.Vec2,c=t.Node,u=t.UITransform},function(t){a=t.default},function(t){p=t.default}],execute:function(){var w,T,d,S,g,f,b,v,y,E,C,L;e._RF.push({},"32d2cwMpDdP/IeXSCRcBwyE","SwipeListener",void 0);const{ccclass:H,property:V}=h;t("SwipeListener",(w=V({type:s,tooltip:"左右滑动自动切换标签"}),T=V({type:s,tooltip:"阻止ScrollView滑动",visible:function(){return this.autoSwitch}}),d=V({type:n,tooltip:"",visible:function(){return this.autoSwitch&&this.cancelScrollView}}),S=V({type:a,tooltip:"标签组件类型SwitchTab",visible:function(){return this.autoSwitch&&!this.toggleGroup}}),g=V({type:p,tooltip:"标签组件类型ToggleGroup",visible:function(){return this.autoSwitch&&!this.switchTab}}),H((v=i((b=class extends l{constructor(...t){super(...t),o(this,"autoSwitch",v,this),o(this,"cancelScrollView",y,this),o(this,"scrollView",E,this),o(this,"switchTab",C,this),o(this,"toggleGroup",L,this),this.startTouchPosition=new r,this.endTouchPosition=new r,this.swipeThreshold=100,this.boundingBoxs=[],this.startTouchX=0,this.startTouchY=0,this.isHorizontalSwipe=void 0}onLoad(){this.autoSwitch&&(this.node.on(c.EventType.TOUCH_START,this.onTouchStart,this,!0),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this,!0),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!0))}onDestroy(){this.autoSwitch&&(this.node.off(c.EventType.TOUCH_START,this.onTouchStart,this,!0),this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this,!0),this.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!0))}onTouchStart(t){this.startTouchPosition=t.getUILocation(),this.startTouchX=t.getLocationX(),this.startTouchY=t.getLocationY()}onTouchMove(t){if(!this.scrollView)return;if(void 0!==this.isHorizontalSwipe)return;const i=t.getLocationX(),o=t.getLocationY(),e=i-this.startTouchX,s=o-this.startTouchY;Math.abs(e)>Math.abs(s)?(this.isHorizontalSwipe=!0,this.scrollView&&(this.scrollView.vertical=!1)):this.isHorizontalSwipe=!1}onTouchEnd(t){this.autoSwitch&&(this.endTouchPosition=t.getUILocation(),this.unschedule(this.toSwipe),this.scrollView?(!0===this.isHorizontalSwipe&&this.handleSwipe(),this.scrollView.vertical=!0,this.isHorizontalSwipe=void 0):this.handleSwipe())}excludeNode(t){this.boundingBoxs.length=0,null==t||t.forEach((t=>{const i=t.getComponent(u).getBoundingBoxToWorld();this.boundingBoxs.push(i)}))}handleSwipe(){const t=this.endTouchPosition.x-this.startTouchPosition.x;if(Math.abs(t)>this.swipeThreshold){for(let t=0;t<this.boundingBoxs.length;t++){if(this.boundingBoxs[t].contains(this.startTouchPosition))return}this.scheduleOnce(this.toSwipe.bind(this,t))}}toSwipe(t){var i,o,e,s;t>0?(null==(i=this.switchTab)||i.onSwipeRight(),null==(o=this.toggleGroup)||o.onSwipeRight(),this.onSwipeRight()):(null==(e=this.switchTab)||e.onSwipeLeft(),null==(s=this.toggleGroup)||s.onSwipeLeft(),this.onSwipeLeft())}onSwipeRight(){}onSwipeLeft(){}}).prototype,"autoSwitch",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(b.prototype,"cancelScrollView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(b.prototype,"scrollView",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(b.prototype,"switchTab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(b.prototype,"toggleGroup",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=b))||f));e._RF.pop()}}}));

System.register("chunks:///_virtual/SwitchTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Core.ts","./ToggleGroup.ts"],(function(t){var e,i,n,o,r,a,s,l,u,c,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t.EventHandler,a=t.CCBoolean,s=t.CCInteger,l=t._decorator,u=t.Component},function(t){c=t.Bundle_name},function(t){p=t.default},function(t){h=t.default}],execute:function(){var d,g,f,b,y,x,m,w,_,C,D,v,H,S,T,E,z,B,I;n._RF.push({},"846a6GtTSlJjKDh9HHgBkBe","SwitchTab",void 0);const{ccclass:L,property:j,menu:k}=l;let P=(d=L("ToggleManagerList"),g=j(o),f=j({type:r}),d((x=e((y=class{constructor(){i(this,"page",x,this),i(this,"initHander",m,this)}}).prototype,"page",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(y.prototype,"initHander",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=y))||b);t("default",(w=k("Custom/SwitchTab"),_=j(h),C=j([P]),D=j({type:r}),v=j({type:a,tooltip:"每次显示都更新数据"}),H=j({type:s,range:[0,10]}),L(S=w((E=e((T=class extends u{constructor(...t){super(...t),i(this,"toggleContainer",E,this),i(this,"list",z,this),i(this,"switchHander",B,this),i(this,"initData",I,this),this.initDataIndexs=[],this._index=0}set index(t){this._index!==t&&(this._index=t,this.toggleContainer.index=t,this.list.forEach(((e,i)=>{e&&(i===t?(e.page.active=!0,r.emitEvents(this.switchHander,t),this.initDataIndexs.includes(t)?this.initData&&r.emitEvents(e.initHander):(this.initDataIndexs.push(t),r.emitEvents(e.initHander))):e.page.active=!1)})))}get index(){return this._index}onLoad(){let t=new r;t.target=this.node,t.component="SwitchTab",t.handler="_onBtToggle",this.toggleContainer.checkEvents.push(t)}onEnable(){this.index=this._index}_onBtToggle(t){this.index=t}onSwipeRight(){let t=this.index-1;t>=0&&(this.playSound(),this.index=t)}onSwipeLeft(){let t=this.index+1;t<this.list.length&&(this.playSound(),this.index=t)}playSound(){p.audio.playEffect("audio/button_open",c.Common)}}).prototype,"toggleContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(T.prototype,"list",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(T.prototype,"switchHander",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(T.prototype,"initData",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(T.prototype,"index",[H],Object.getOwnPropertyDescriptor(T.prototype,"index"),T.prototype),S=T))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/Thirdparty.ts",["cc","./Core.ts","./ChannelConfig.ts"],(function(t){var e,a,r,i,l;return{setters:[function(t){e=t.sys,a=t.native,r=t.cclegacy},function(t){i=t.default},function(t){l=t.ChannelConfig}],execute:function(){r._RF.push({},"f6d5eQGG1VMe6wFonaSpLd1","Thirdparty",void 0);let n=t("NativeEventId",function(t){return t[t.CloseSplash=0]="CloseSplash",t[t.Copy=1]="Copy",t[t.ExitApp=2]="ExitApp",t[t.WxLogin=3]="WxLogin",t[t.WxShare=4]="WxShare",t}({}));const o=t("native_package_url","com/cocos/game/AppActivity");class s{static initBrowserParam(){var t;this.browser_params=this.getHrefParam(),null!=(t=this.browser_params)&&t.server&&(l.serverUrl=this.browser_params.server)}static callThirdparty(t,r){let l={id:t,data:r??{}},n=JSON.stringify(l);switch(i.logger.log(`callThirdparty platform:${e.platform},${n}`),e.platform){case e.Platform.ANDROID:a.reflection.callStaticMethod(o,"callNative","(Ljava/lang/String;)V",n);break;case e.Platform.IOS:}}static getHrefParam(){if(e.isNative)return;let t=window.location.href,a=t.indexOf("?"),r=null;if(a>-1){t.slice(a+"?".length).split("&").forEach((t=>{let e=t.split("=");r||(r={}),r[e[0]]=e[1]}))}return r}static copyStr(t,r=!0){if(e.os===e.OS.ANDROID){let e={id:n.Copy,data:t??{}},r=JSON.stringify(e);a.reflection.callStaticMethod(o,"callNative","(Ljava/lang/String;)V",r)}else if(e.os===e.OS.WINDOWS){let e=document.createElement("textarea");e.textContent=t,document.body.appendChild(e),e.readOnly=!0,e.select(),e.setSelectionRange(0,e.textContent.length);try{const t=document.execCommand("copy");document.body.removeChild(e),t&&r&&i.utils.showToast("复制成功")}catch(t){}}}}t("default",s),s.browser_params=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/ThirdpartyListener.ts",["cc","./Core.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default}],execute:function(){t._RF.push({},"1c437e6D/NJb5xFTmGnASl5","ThirdpartyListener",void 0);let a=e("NATIVE2COCOS",function(e){return e[e.Back=0]="Back",e[e.GameShow=1]="GameShow",e[e.GameHide=2]="GameHide",e[e.AppUpdate=3]="AppUpdate",e[e.NetworkChange=4]="NetworkChange",e[e.WxLogin=100]="WxLogin",e[e.WxShare=101]="WxShare",e}({}));e("default",class{constructor(){this.msgHandler={}}init(){this.msgHandler[a.Back]=this.onBack,this.msgHandler[a.GameShow]=this.onGameShow,this.msgHandler[a.GameHide]=this.onGameHide,this.msgHandler[a.AppUpdate]=this.onAppupdate,this.msgHandler[a.NetworkChange]=this.onNetworkChange,this.msgHandler[a.WxLogin]=this.onWxLogin,this.msgHandler[a.WxShare]=this.onWxShare,n.event.on(n.eventType.onNative2cocos,this.onNative2cocos,this)}onNative2cocos(e){let t=JSON.parse(e);this.msgHandler[t.id]&&this.msgHandler[t.id].bind(this)(t.data)}onBack(){n.event.emit(n.eventType.onNativeBack)}onGameShow(){n.event.emit(n.eventType.onNativeGameShow)}onGameHide(){n.event.emit(n.eventType.onNativeGameHide)}onAppupdate(){n.event.emit(n.eventType.onAppUpdate)}onNetworkChange(e){n.event.emit(n.eventType.onNetworkChange,e)}onWxLogin(e){-1!==e.code&&n.event.emit(n.eventType.onWxLoginSucc,e)}onWxShare(e){e.code}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(t){var i,s,e,l,n,h,r,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){e=t.cclegacy,l=t.Label,n=t.Enum,h=t._decorator,r=t.Component},function(t){m=t.default}],execute:function(){var o,a,u,_,c,p;e._RF.push({},"e6aaeD1KHlBYa82qx5qeNSR","Timer",void 0);let b=t("TIMERTYPE",function(t){return t[t.NUMBER=0]="NUMBER",t[t.CLOCK=1]="CLOCK",t}({}));const{ccclass:f,menu:d,property:C,requireComponent:g}=h;t("default",(o=g(l),a=d("Custom/Timer"),u=C({type:n(b)}),f(_=o(_=a((p=i((c=class extends r{constructor(...t){super(...t),s(this,"type",p,this),this._finishCb=null,this._timeCb=null,this._time=0,this._timeformat=0,this._hideSeconds=void 0,this._lab=null}onDisable(){this.stopTimer()}startTimer(t,i,s,e=0,n=!1,h){var r;this._timeformat=e,this._hideSeconds=n,this.stopTimer(),this._time=t,this._lab=this.node.getComponent(l),this.type===b.NUMBER?this._lab.string=t.toString():this._lab.string=e?m.utils.leftTimestamp2DDHHmmss(t,null,2===e,n):m.utils.leftTimestamp2HHmmss(t,h),this._finishCb=i,this._timeCb=s,null==(r=this._timeCb)||r.call(this,this._lab.string),this.schedule(this.call,1)}stopTimer(){this.unschedule(this.call)}call(){var t;if(this._time--,this._time<=0){this.stopTimer(),this._time=0,this._timeformat=0,this._hideSeconds=!1,this._lab.string="0";let t=this._finishCb;this._finishCb=null,null==t||t(),this._timeCb=null}else this.type===b.NUMBER?this._lab.string=this._time.toString():this._timeformat?this._lab.string=m.utils.leftTimestamp2DDHHmmss(this._time,null,2===this._timeformat,this._hideSeconds):this._lab.string=m.utils.leftTimestamp2HHmmss(this._time);null==(t=this._timeCb)||t.call(this,this._lab.string)}}).prototype,"type",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.NUMBER}}),_=c))||_)||_)||_));e._RF.pop()}}}));

System.register("chunks:///_virtual/ToggleGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Core.ts","./ActiveNode.ts","./ActiveSprite.ts"],(function(e){var t,i,n,o,s,l,r,c,h,d,u,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.CCBoolean,s=e.CCInteger,l=e.EventHandler,r=e._decorator,c=e.Component,h=e.Button},function(e){d=e.Bundle_name},function(e){u=e.default},function(e){p=e.default},function(e){a=e.default}],execute:function(){var f,g,x,m,y,w,_,C,v,E;n._RF.push({},"9330d9SocRJN7wwyos4lEQy","ToggleGroup",void 0);const{ccclass:b,property:S,menu:k}=r;e("default",(f=k("Custom/ToggleGroup"),g=S({type:o,tooltip:"如果这个设置为 true，那么 toggle 按钮在被点击的时候可以反复地被选中和未选中。"}),x=S({type:o,tooltip:"禁止多选",visible:function(){return this.allowSwitchOff}}),m=S({type:s,range:[0,10]}),y=S({type:l}),b(w=f((C=t((_=class extends c{constructor(...e){super(...e),i(this,"allowSwitchOff",C,this),i(this,"noMore",v,this),this._indexs=[],this._index=0,i(this,"checkEvents",E,this)}get indexs(){return this._indexs}set indexs(e){this._indexs=e,this.node.children.forEach(((e,t)=>{(e.getComponent(a)??e.getComponent(p)).index=this._indexs.includes(t)?1:0}))}set index(e){this._index=e,this.node.children.forEach(((t,i)=>{(t.getComponent(a)??t.getComponent(p)).index=e===i?1:0}))}get index(){return this._index}getCurrNode(){return this.node.children[this.index]}onLoad(){this.node.children.forEach(((e,t)=>{let i=new l;i.target=this.node,i.component=this.name.match(/<.*>$/)[0].slice(1,-1),i.handler="onClick",i.customEventData=t+"",(e.getComponent(h)??e.addComponent(h)).clickEvents.push(i)}))}onClick(e,t){u.audio.playEffect("audio/button_open",d.Common);let i=+t;if(this.allowSwitchOff){let e=this._indexs.indexOf(i);-1===e?(this.noMore&&(this._indexs.length=0),this._indexs.push(i)):this._indexs.splice(e,1),this.indexs=this._indexs,l.emitEvents(this.checkEvents,this._indexs)}else this.switchToggle(i)}onSwipeRight(){let e=this.index-1;e>=0&&(this.playSound(),this.switchToggle(e))}onSwipeLeft(){let e=this.index+1;e<this.node.children.length&&(this.playSound(),this.switchToggle(e))}switchToggle(e){this.index=e,l.emitEvents(this.checkEvents,e)}playSound(){u.audio.playEffect("audio/button_open",d.Common)}}).prototype,"allowSwitchOff",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(_.prototype,"noMore",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(_.prototype,"index",[m],Object.getOwnPropertyDescriptor(_.prototype,"index"),_.prototype),E=t(_.prototype,"checkEvents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=_))||w)||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/TouchButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,s,a,l,h,r,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.EventHandler,s=t._decorator,a=t.Component,l=t.v3,h=t.Tween,r=t.Node,c=t.tween}],execute:function(){var p,d,u,T,E,m,C,b,g,y,f;o._RF.push({},"dc1d07b2ndApJaT6ADtP/W9","TouchButton",void 0);const{ccclass:v,property:A,menu:k}=s;t("default",(p=k("Custom/TouchButton"),d=A({tooltip:"触发长按的时间"}),u=A({tooltip:"点击回调函数",type:n}),T=A({tooltip:"长按回调函数",type:n}),E=A({tooltip:"触摸结束",type:n}),v(m=p((b=e((C=class extends a{constructor(...t){super(...t),i(this,"timeAuto",b,this),i(this,"normalCallback",g,this),i(this,"longTimeCallback",y,this),i(this,"touchEnd",f,this),this.isTrigger=!1,this.SCALE=l(0,0,0)}onLoad(){this.SCALE=this.node.getScale()}onEnable(){this.addEvt()}onDisable(){this.closeEvt(),h.stopAllByTarget(this.node),this.node.setScale(this.SCALE)}addEvt(){this.closeEvt(),this.node.on(r.EventType.TOUCH_START,this.onBeginTapped,this),this.node.on(r.EventType.TOUCH_CANCEL,this.onEndTapped,this),this.node.on(r.EventType.TOUCH_END,this.onEndTapped,this)}closeEvt(){this.node.off(r.EventType.TOUCH_START,this.onBeginTapped,this),this.node.off(r.EventType.TOUCH_CANCEL,this.onEndTapped,this),this.node.off(r.EventType.TOUCH_END,this.onEndTapped,this)}onBeginTapped(){this.startTimer(),h.stopAllByTarget(this.node),this.node.setScale(this.SCALE),c(this.node).to(.1,{scale:l(.9*this.SCALE.x,.9*this.SCALE.y,1)}).start()}onEndTapped(){this.stopTimer(),c(this.node).to(.1,{scale:this.SCALE}).start(),this.isTrigger?this.isTrigger=!1:this.toNormalCallback(),this.touchEnd&&this.touchEnd.emit([this.touchEnd.customEventData])}startTimer(){this.stopTimer(),this.scheduleOnce(this.toLongTimeCallback,this.timeAuto)}stopTimer(){this.unschedule(this.toLongTimeCallback)}toNormalCallback(){this.normalCallback&&this.normalCallback.emit([this.node])}toLongTimeCallback(){this.isTrigger=!0,this.longTimeCallback&&this.longTimeCallback.emit([this.node])}}).prototype,"timeAuto",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),g=e(C.prototype,"normalCallback",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),y=e(C.prototype,"longTimeCallback",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),f=e(C.prototype,"touchEnd",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),m=C))||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"e4cdaSsdkxDBInzzrQ9UfzJ","UserData",void 0);t("default",class{constructor(){this.userData=null,this.settingData=null}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/WebPlatformImpl.ts",["cc","./Core.ts"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy},function(e){o=e.default}],execute:function(){t._RF.push({},"4d810t5CbtN2J9D3+iOx4jc","WebPlatformImpl",void 0);class s{isFeatureSupported(e){}login(e){}pay(e){}share(e){}exitApp(){}closeSplash(){}copyStr(e){return new Promise((t=>{let s=document.createElement("textarea");s.textContent=e,document.body.appendChild(s),s.readOnly=!0,s.select(),s.setSelectionRange(0,s.textContent.length);try{const e=document.execCommand("copy");document.body.removeChild(s),e?(o.utils.showToast("复制成功"),t({code:"SUCCESS",message:"复制成功"})):(o.utils.showToast("复制失败"),t({code:"FAILED",message:"复制失败"}))}catch(e){o.utils.showToast("复制失败"),t({code:"FAILED",message:"复制失败"})}}))}}e("WebPlatformImpl",s),s.PLATFORM_NAME="WebPlatform",t._RF.pop()}}}));

System.register("chunks:///_virtual/WidgetPro.ts",["cc","./Core.ts","./Config.ts"],(function(t){var e,o,n,c,i,r;return{setters:[function(t){e=t.cclegacy,o=t.Widget,n=t.Component,c=t._decorator},function(t){i=t.default},function(t){r=t.Config}],execute:function(){var s;e._RF.push({},"8890c0UGqRNkqkMx0r2FVmk","WidgetPro",void 0);const{ccclass:u,requireComponent:g,menu:d}=c;t("default",u(s=g(o)(s=d("Custom/WidgetPro")(s=class extends n{onLoad(){let t=this.getComponent(o),e=i.memmory.screen_h/r.design_height;t.top*=e,t.bottom/=e,t.left*=e,t.right*=e,t.updateAlignment()}})||s)||s)||s);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});